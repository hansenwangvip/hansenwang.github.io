<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[å¦‚ä½•å¿½ç•¥ä¸€ä¸ªsubmodule?]]></title>
    <url>%2F2019%2F03%2F05%2F2019-03-05%20%E5%A6%82%E4%BD%95%E5%9C%A8%E4%BD%A0%E7%9A%84Git%E4%BB%93%E5%BA%93%E4%B8%AD%E5%BF%BD%E7%95%A5%E4%B8%80%E4%B8%AAsubmodule%3F%2F</url>
    <content type="text"><![CDATA[ç—›ç‚¹åœ¨Hexoå’ŒTravisç»“åˆçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†submoduleçš„é—®é¢˜ã€‚HEXOä¸­ï¼Œæˆ‘ä½¿ç”¨äº†NexTä¸»é¢˜ï¼Œè¯¥ä¸»é¢˜çš„ä¸€äº›åŠŸèƒ½ï¼Œéœ€è¦ä¾èµ–ä¸€äº›å­ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥cloneä¸€äº›repoåˆ°ä¸»é¢˜çš„ç›®å½•ä¸‹ã€‚ä½†æ˜¯Gitä¼šé»˜è®¤ä¸ºæˆ‘å®‰è£…de å‚è€ƒé“¾æ¥ https://stackoverflow.com/questions/1759587/un-submodule-a-git-submodule 123456git rm --cached submodule_path # delete reference to submodule HEAD (no trailing slash)git rm .gitmodules # if you have more than one submodules, # you need to edit this file instead of deleting!rm -rf submodule_path/.git # make sure you have backup!!git add submodule_path # will add files instead of commit referencegit commit -m "remove submodule" Written with StackEdit.]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>æŠ€å·§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git Commit Messageè§„èŒƒå‚è€ƒ]]></title>
    <url>%2F2019%2F01%2F24%2F2019-01-24%20Git%20Commit%20Message%E8%A7%84%E8%8C%83%E5%8F%82%E8%80%83%2F</url>
    <content type="text"><![CDATA[æ³¨ï¼šåœ¨Gitåä½œæ¨¡å¼çš„å›¢é˜Ÿä¸­ï¼ŒCommit Messageçš„è§„èŒƒå¯¹ç‰ˆæœ¬æ§åˆ¶èµ·ç€å¾ˆé‡è¦çš„ä½œç”¨ã€‚æœ¬æ–‡å¼•ç”¨è‡ªå›¢é˜Ÿå†…éƒ¨çš„è§„èŒƒï¼Œåˆ†äº«å‡ºæ¥ï¼Œä¸€æ˜¯ä¸ºäº†è´¡çŒ®ç¤¾åŒºï¼ŒäºŒæ˜¯ä¸ºäº†åŠ æ·±å°è±¡ã€‚ Commit Messageè§„èŒƒåœ¨gitå¼€å‘æµç¨‹ä¸­ï¼Œæ¯æ¬¡git commitï¼Œéƒ½éœ€è¦å¯¹è¯¥æ¬¡commitæ·»åŠ æè¿°ä¿¡æ¯ï¼Œæè¿°æ­¤æ¬¡commitçš„å…·ä½“æ”¹åŠ¨å†…å®¹ã€‚è§„èŒƒçš„commit messageæ ¼å¼ï¼Œå¯ä»¥è®©å›¢é˜Ÿæˆå‘˜å¯¹æ¯æ¬¡æ”¹åŠ¨å†…å®¹è¿›è¡Œå¿«é€Ÿäº†è§£ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿git logæ—¶çš„æµè§ˆå’Œç­›é€‰ã€‚ ç›®å‰ç¤¾åŒºä½¿ç”¨æœ€å¹¿çš„æ˜¯ AngularJS çš„è§„èŒƒï¼š Google Docs åŸæ–‡ é˜®ä¸€å³°åšå®¢å¯¹äºcommit messageçš„ä»‹ç» ç®€è¿°ä¸€æ¡å®Œæ•´çš„æäº¤ä¿¡æ¯(commit message)ä¸€èˆ¬æ¥è¯´åŒ…å«Headerå’ŒBodyï¼Œå…¶ä¸­Headeræ˜¯å¿…é¡»çš„ï¼ŒBodyæ˜¯å¯é€‰çš„ã€‚ å¯¹äºå¤§éƒ¨åˆ†å¯ä»¥ç®€å•æè¿°æ¸…æ¥šçš„æ”¹åŠ¨ï¼Œåªéœ€è¦ä¸€ä¸ªHeaderå³å¯ã€‚ è€Œå¯¹äºä¸€äº›éœ€è¦æ›´è¯¦ç»†è¯´æ˜ã€è¦åˆ†æ¡åˆ—å‡ºçš„æ”¹åŠ¨ï¼Œæˆ‘ä»¬åœ¨Headerè¿›è¡Œç®€è¿°ä¹‹å¤–ï¼Œè¿˜è¦åœ¨Bodyä¸­è¯¦ç»†æè¿°ã€‚ ä¸€èˆ¬è€Œè¨€ï¼ŒHeaderé•¿åº¦ä¸åº”è¶…è¿‡50ä¸ªå­—ç¬¦ï¼Œå¦‚æœè¶…è¿‡çš„è¯åˆ™è€ƒè™‘æ·»åŠ Bodyè¿›è¡Œè¯¦è¿°ã€‚ æˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„git commit -m &quot;&lt;Commit Message Header&gt;&quot;ï¼Œå°±æ˜¯åªæ·»åŠ å•è¡Œçš„Headerä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š 12# è¿™é‡Œåªæ·»åŠ äº†Headergit commit -m "feat(å®˜ç½‘ä¸»é¡µ): å°†iOSçš„å¤´éƒ¨èƒŒæ™¯ä¸Androidç»Ÿä¸€ï¼Œä¸å†ä½¿ç”¨é»˜è®¤è“è‰²å›¾ç‰‡" å¦‚æœéœ€è¦æ·»åŠ Bodyè¯¦ç»†ä¿¡æ¯ï¼Œåˆ™ä½¿ç”¨git commitè¿›å…¥æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå†è¿›è¡Œå…·ä½“ç¼–è¾‘ã€‚ä¾‹å¦‚ï¼š 1234567# è¿™é‡Œæ—¢æ·»åŠ äº†Headerï¼Œåˆæ·»åŠ äº†Bodychore(æ„å»ºä¼˜åŒ–): è§£å†³æ„å»ºæµç¨‹å‡ ä¸ªé—®é¢˜- æ¯æ¬¡æ„å»ºchunkhashä¼šæ”¹å˜çš„é—®é¢˜- å†…è”å’Œå¤–é“¾æ ·å¼é‡å¤é—®é¢˜- å›¾ç‰‡md5é”™è¯¯é—®é¢˜- æå–é¡¹ç›®å…¬å…±vendor å…·ä½“è§„èŒƒä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼ŒHeaderçš„æ ¼å¼ä¸ºï¼š&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;ã€‚ Headerä¸»è¦ç”±type, scopeå’Œsubjectä¸‰éƒ¨åˆ†ç»„æˆï¼š typeç”¨æ¥æè¿°è¿™æ¬¡æäº¤å±äºå“ªä¸€ç±»ä¿®æ”¹ï¼Œæ¯”å¦‚æ˜¯å®Œæˆéœ€æ±‚è¿˜æ˜¯ä¿®å¤BUGã€‚ï¼ˆå¿…éœ€ï¼‰ scopeç”¨æ¥æè¿°è¿™æ¬¡æäº¤æ¶‰åŠçš„èŒƒå›´ï¼Œæ¯”å¦‚æ˜¯è¯¦æƒ…é¡µè¿˜æ˜¯ç¤¼åŒ…é¡µã€‚å¯¹äºä¸€äº›æ²¡æœ‰æ˜ç¡®èŒƒå›´çš„æ”¹åŠ¨ï¼Œå¯ä»¥å¿½ç•¥ã€‚ï¼ˆå¯é€‰ï¼‰ subjectæ˜¯è¿™æ¬¡æäº¤çš„ç®€å•æè¿°ï¼Œå…·ä½“åšäº†ä»€ä¹ˆã€‚å¦‚æœ50å­—ç¬¦å†…ä¸èƒ½æè¿°æ¸…æ¥šï¼Œå»ºè®®æ·»åŠ Bodyç»§ç»­æè¿°ã€‚ï¼ˆå¿…éœ€ï¼‰ typeç±»åˆ«å¸¸ç”¨ï¼š feat - æ–°å¢éœ€æ±‚ã€éœ€æ±‚è¿­ä»£ã€æ–°åŠŸèƒ½ç­‰ç›¸å…³çš„æäº¤ fix - BUGä¿®å¤æäº¤ docs - æ–‡æ¡£ç›¸å…³çš„æäº¤ refactor - æŠ€æœ¯ä¼˜åŒ–ç±»çš„ä»£ç é‡æ„ï¼Œä¸å½±å“å…·ä½“éœ€æ±‚å’Œé€»è¾‘ï¼Œä¹Ÿä¸æ¶‰åŠBUGä¿®å¤çš„ä¿®æ”¹ï¼Œå¦‚ï¼šæµ‹é€Ÿä¼˜åŒ–ã€æ€§èƒ½ä¼˜åŒ–ã€æ¨¡å—æ‹†åˆ†ç­‰ chore - ä»£ç ç»´æŠ¤ç›¸å…³çš„å°æ”¹åŠ¨ï¼Œå¦‚ï¼šæ›´æ–°ä¾èµ–åº“ã€æ„å»ºå·¥å…·åŠå…¶é…ç½®çš„æ”¹åŠ¨ã€ä»£ç æ ¼å¼è°ƒæ•´ç­‰ è¾ƒä¸å¸¸ç”¨ï¼š workflow - å¼€å‘å·¥ä½œæµçš„æ”¹åŠ¨ï¼Œæ¯”å¦‚ä¿®æ”¹package.jsonä¸­çš„scriptsï¼Œæ¯”å¦‚å¢åŠ æˆ–ä¿®æ”¹ä¸€äº›å‘å¸ƒè„šæœ¬ test - æµ‹è¯•ç›¸å…³çš„ä¿®æ”¹ï¼Œæ¯”å¦‚å¢åŠ æµ‹è¯•ç”¨ä¾‹ã€‚ Revertåœ¨éœ€è¦å›æ»šæŸäº›æ”¹åŠ¨çš„æ—¶å€™ï¼Œä½¿ç”¨revert: &lt;reverted commit Header&gt;æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯å°†å›æ»šçš„é‚£ä¸€æ¡æäº¤çš„Headerä½œä¸ºrevertåçš„å†…å®¹ã€‚ ä¾‹å¦‚ï¼Œä¹‹å‰è¿›è¡Œäº†æŸäº›æ”¹åŠ¨ï¼š 1fix(ç¤¼åŒ…é¡µ): ä¿®å¤äº†ç¤¼åŒ…é¡µå±•ç¤ºä¸å®Œå…¨çš„bug ä¹‹åå‘ç°è¿™ä¸ªæ”¹åŠ¨ä¼šå¼•èµ·ä¸€äº›å…¶ä»–çš„bugï¼Œä¸å¾—å·²éœ€è¦å›æ»šï¼š 1revert: fix(ç¤¼åŒ…é¡µ): ä¿®å¤äº†ç¤¼åŒ…é¡µå±•ç¤ºä¸å®Œå…¨çš„bug æ³¨æ„äº‹é¡¹ scopeä¸æ˜¯å¿…é¡»çš„ï¼Œä¹Ÿæ²¡æœ‰å…·ä½“çš„é™å®šï¼Œä½†æ˜¯æœ‰æ˜æ˜¾èŒƒå›´ç‰¹å¾çš„å°½é‡å†™ä¸Šã€‚ï¼ˆæ¯”å¦‚ä¸‹é¢ä¾‹å­ä¸­çš„(è¯¦æƒ…é¡µ)ï¼‰ï¼› æ³¨æ„æè¿°è¦æ¸…æ™°ï¼Œè¦é’ˆå¯¹æ”¹åŠ¨æœ¬èº«ï¼Œè®©å…¶ä»–æˆå‘˜åœ¨æ²¡æœ‰ä»»ä½•ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½çœ‹æ‡‚æ”¹åŠ¨äº†ä»€ä¹ˆã€‚ ä¸å†™åºŸè¯ï¼ˆä¸è¿‡å¯ä»¥å¶å°”å–ä¸ªèŒğŸ˜‰ï¼‰ï¼› typoä¿®æ­£ã€ä»£ç æ ¼å¼è°ƒæ•´ä¹‹ç±»çš„ï¼Œåœ¨AngularJSæ ‡å‡†é‡Œå¦åˆ†åˆ°styleç±»åˆ«ï¼Œæˆ‘ä»¬ç»Ÿä¸€æ”¾åœ¨choreå½“ä¸­ã€‚è¿™äº›å¾ˆç»†å°çš„æ”¹åŠ¨ï¼Œæè¿°å¯ä»¥ä¸ç”¨ç‰¹åˆ«è¯¦ç»†ï¼› åº”ä¿è¯æ”¹åŠ¨å’Œcommitä¸€ä¸€å¯¹åº”ï¼› ä¸€ä¸ªcommitåªå¯¹åº”ä¸€å¤„æ”¹åŠ¨ã€ä¸€ä¸ªéœ€æ±‚æˆ–ä¸€ä¸ªBUGï¼Œä¸è¦æŠŠå¤šä¸ªæ”¹åŠ¨é›†ä¸­æ··åœ¨ä¸€èµ·æäº¤ã€‚åœ¨åŒæ—¶ä¿®æ”¹äº†å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œä¸è¦ç›´æ¥git add .ï¼Œåº”è¯¥æŒ‘é€‰ç›¸å…³çš„æ–‡ä»¶è¿›è¡Œaddå’Œcommitï¼Œå†æŒ‘é€‰å¦ä¸€éƒ¨åˆ†æ–‡ä»¶è¿›è¡Œaddå’Œcommitï¼› ä¸€å¤„æ”¹åŠ¨ã€ä¸€ä¸ªéœ€æ±‚æˆ–ä¸€ä¸ªBUGï¼Œåº”å°½é‡é›†ä¸­åœ¨åŒä¸€ä¸ªcommitä¸­ï¼Œä¸è¦å¼€å‘åˆ°ä¸­é€”å…ˆæäº¤ä¸€æ¬¡ï¼Œå¼€å‘å®Œæˆå†æäº¤ä¸€æ¬¡ã€‚ 1234567891011# Badfix: bugä¿®å¤fix: ä¿®å¤äº†æµ‹è¯•æ˜¨å¤©å‘ç°çš„bugfeat: å®Œæˆäº†ä»Šå¤©æ’æœŸçš„éœ€æ±‚# OKchore: ä¿®æ­£äº†å‡ å¤„æ‹¼å†™é”™è¯¯# Goodfeat: åœ¨æ–°çš„ä¸»é¡µæ–°å¢äº†ä¸€ä¸ªå…³é—­æŒ‰é’®fix(è¯¦æƒ…é¡µ): ä¿®å¤å±•å¼€æ´»åŠ¨çš„sidä¸ºstringçš„bug]]></content>
      <categories>
        <category>è½¯ä»¶å·¥ç¨‹</category>
      </categories>
      <tags>
        <tag>è§„èŒƒ</tag>
        <tag>Git</tag>
        <tag>è½¯ä»¶å·¥ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Array.prototype.sort()çš„é«˜çº§ç”¨æ³•]]></title>
    <url>%2F2018%2F01%2F28%2F2018-01-28%20Array.prototype.sort%E7%9A%84%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95%2F</url>
    <content type="text"><![CDATA[Array.prototype.sort()ä¸€ã€åŸºæœ¬æ“ä½œsort()æ–¹æ³•çš„é»˜è®¤æ’åºé¡ºåºæ˜¯æ ¹æ®ä¸²Unicodeç ç‚¹ã€‚ 12345678var fruit = [&apos;cherries&apos;, &apos;apples&apos;, &apos;bananas&apos;];fruit.sort();//[&apos;apples&apos;, &apos;bananas&apos;, &apos;cherries&apos;]var scores = [1, 10, 21, 2];scores.sort();//[1, 10, 2, 21]//è¿™é‡Œçš„10ç«Ÿç„¶åœ¨2ä¹‹å‰ï¼Œå› ä¸ºåœ¨UnicodeæŒ‡é’ˆé¡ºåºä¸­ &apos;10&apos; åœ¨ &apos;2&apos; ä¹‹å‰ã€‚ äºŒã€è¿›é˜¶æ“ä½œï¼ˆcompareFunctionï¼‰è¿™æ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œæ¥å¾—åˆ°æˆ‘ä»¬æ‰€éœ€è¦çš„æ’åºã€‚å¦‚æœæŒ‡æ˜äº†compareFunction,é‚£ä¹ˆæ•°ç»„ä¼šæŒ‰ç…§è°ƒç”¨è¯¥å‡½æ•°çš„è¿”å›å€¼æ’åºã€‚å³aå’Œbæ˜¯ä¸¤ä¸ªå°†è¦è¢«æ¯”è¾ƒçš„å…ƒç´ ï¼š 2.0 å­—ç¬¦ä¸²æ’åº123456789101112var str_arr = [&apos;cherries&apos;, &apos;apples&apos;, &apos;bananas&apos;];function compareStr(a, b)&#123; if(a&lt;b)&#123; return -1; &#125; if(a&gt;b)&#123; return 1; &#125; return 0;&#125;str_arr.sort(compareStr);// [&apos;apples&apos;, &apos;bananas&apos;, &apos;cherries&apos;] 2.1 æ•°å­—æ’åº å¦‚æœcompareFunction(a, b)å°äº0ï¼Œé‚£ä¹ˆaä¼šæ’åˆ°bä¹‹å‰ï¼› å¦‚æœcompareFunction(a, b)ç­‰äº0 , é‚£ä¹ˆä½ç½®ä¸å˜ï¼› å¦‚æœcompareFunction(a, b)å¤§äº0ï¼Œé‚£ä¹ˆbä¼šæ’åˆ°aä¹‹å‰ï¼›12345678910111213141516function compareNumbers(a, b)&#123; return a - b;&#125;var numbers = [4, 2, 5, 1, 3];numbers.sort(function(a, b)&#123; return a - b;&#125;);console.log(numbers);//ä¹Ÿå¯ä»¥å†™æˆï¼švar numbers = [4, 2, 5, 1, 3];numbers.sort((a, b) =&gt; a - b);console.log(numbers);//è¾“å‡ºï¼š[1, 2, 3, 4, 5] 2.2 å¯¹è±¡æŒ‰ç…§æŸä¸ªå±æ€§æ’åº1234567891011121314151617181920212223242526var items = [ &#123; name: 'Edward', value: 21 &#125;, &#123; name: 'Sharpe', value: 37 &#125;, &#123; name: 'And', value: 45 &#125;, &#123; name: 'The', value: -12 &#125;, &#123; name: 'Magnetic' &#125;, &#123; name: 'Zeros', value: 37 &#125;];//æŒ‰valueå€¼æ’åºitems.sort(function (a,b)&#123; return (a,.value - b.value)&#125;);//æŒ‰nameå€¼æ’åºitems.sort(function(a, b)&#123; var nameA = a.name.toUpperCase(); var nameB = b.name.toUpperCase(); if(nameA &lt; nameB)&#123; return -1; &#125; if(nameA &gt; nameB)&#123; return 1; &#125; return 0;&#125;); ä¸‰ã€é«˜çº§æ“ä½œï¼šä½¿ç”¨æ˜ å°„æ”¹å–„æ’åºcompareFunctionå¯èƒ½éœ€è¦å¯¹å…ƒç´ åšå¤šæ¬¡æ˜ å°„ä»¥å®ç°æ’åºï¼Œå°¤å…¶å½“compareFunctionè¾ƒä¸ºå¤æ‚ï¼Œä¸”å…ƒç´ è¾ƒå¤šçš„æ—¶å€™ï¼ŒæŸäº›compareFunction å¯èƒ½ä¼šå¯¼è‡´å¾ˆé«˜çš„è´Ÿè½½ã€‚ä½¿ç”¨mapè¾…åŠ©æ’åºå°†ä¼šæ˜¯ä¸ªå¥½ä¸»æ„ã€‚ åŸºæœ¬æ€æƒ³æ˜¯é¦–å…ˆå°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ¯”è¾ƒçš„å®é™…å€¼å–å‡ºæ¥ï¼Œæ’åºåå†å°†æ•°ç»„æ¢å¤ã€‚ 123456789101112131415161718// éœ€è¦è¢«æ’åºçš„æ•°ç»„var list = [&apos;Delta&apos;, &apos;alpha&apos;, &apos;CHARLIE&apos;, &apos;bravo&apos;];// å¯¹éœ€è¦æ’åºçš„æ•°å­—å’Œä½ç½®çš„ä¸´æ—¶å­˜å‚¨, mappedä¸ºä¸´æ—¶å®¹å™¨var mapped = list.map(function(el, i) &#123; return &#123; index: i, value: el.toLowerCase() &#125;;&#125;)// æŒ‰ç…§å¤šä¸ªå€¼æ’åºæ•°ç»„mapped.sort(function(a, b) &#123; return +(a.value &gt; b.value) || +(a.value === b.value) - 1;&#125;);// æ ¹æ®ç´¢å¼•å¾—åˆ°æ’åºçš„ç»“æœvar result = mapped.map(function(el)&#123; return list[el.index];&#125;);//result : [&quot;alpha&quot;, &quot;bravo&quot;, &quot;CHARLIE&quot;, &quot;Delta&quot;]]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ›´å¥½ç”¨çš„border-box]]></title>
    <url>%2F2017%2F10%2F23%2F2017-10-23%20%E6%9B%B4%E5%A5%BD%E7%94%A8%E7%9A%84border-box%2F</url>
    <content type="text"><![CDATA[è‹±æ–‡åŸæ–‡æ¥è‡ªCSS-tricks: Inheriting box-sizing Probably Slightly Better Best-Practice æˆ‘æ˜¯æŠŠbox-sizingé‡ç½®ä¸ºborder-boxçš„å¿ å®ç²‰ä¸ï¼Œç”šè‡³äºæˆ‘ä»¬æœ‰ä¸€ä¸ªâ€œå¹´åº¦ç‰¹åˆ«æ—¥å­â€ã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªç»†å°çš„è°ƒæ•´ï¼Œè€Œä¸”çœ‹èµ·æ¥æ˜¯ä¸ªä¸é”™çš„æ€è·¯ã€‚è¿™æ˜¯å¾®è°ƒçš„ç‰ˆæœ¬ï¼š123456 html&#123; box-sizing: border-box;&#125;*, *:before, *:after&#123; box-sizing:inherit;&#125; æ„Ÿè°¢Job Nealçš„ç»§æ‰¿æ€æƒ³ï¼Œä»–è¯´ï¼š This will give you the same result ,and make it easier to change the box-sizing in plugins or other components that leverage other behavior.è¿™ä¼šç»™ä½ åŒæ ·çš„ç»“æœï¼Œè€Œä¸”ä½¿å¾—åœ¨æ’ä»¶ä¸­æˆ–å…¶ä»–ç»„ä»¶ä¸­æ›´å®¹æ˜“æ”¹å˜ box-sizing çš„å€¼ï¼Œè€Œä¸ä¼šå½±å“åˆ«çš„è¡¨ç°ã€‚ è¿›ä¸€æ­¥è§£é‡Šï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œä½ æœ‰ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæœ¬è¢«è®¾è®¡ä¸ºé»˜è®¤çš„box-sizing ä¸º content-box. ä½ åªæƒ³è¦ä½¿ç”¨ï¼Œåˆä¸æç ¸å®ƒã€‚ 12345.component&#123; /*æ—¨åœ¨ä»¥é»˜è®¤çš„box-sizingå·¥ä½œ*/ /*åœ¨ä½ çš„é¡µé¢ä¸­ï¼Œ ä½ å¯ä»¥æŠŠå®ƒé‡ç½®ä¸ºnormal */ box-sizing: content-box;&#125; ä½†é—®é¢˜æ˜¯ï¼Œè¿™æ ·å®é™…ä¸Šå¹¶ä¸é‡ç½®æ•´ä¸ªç»„ä»¶ã€‚ä¹Ÿè®¸åœ¨ç»„ä»¶å†…éƒ¨æœ‰ä¸€ä¸ª&lt;header&gt;ï¼ŒæœŸæœ›å®ƒåœ¨ä¸€ä¸ªcontent-boxä¸­ã€‚å¦‚æœè¿™ä¸ªé€‰æ‹©å™¨åœ¨ä½ çš„CSSä¸­ï¼Œè€åŠæ³•å°±æ˜¯åšä¸€ä¸ª box-sizing resetâ€¦ 123*&#123; box-sizing: border-box;&#125; ç„¶åè¿™ä¸ªheaderä¸æ˜¯ä½ æƒ³è¦çš„content-box, è€Œæ˜¯ border-box. å°±åƒï¼š1234&lt;div class= "component"&gt; &lt;!-- I'm content box --&gt; &lt;header&gt; &lt;!-- I'm border-box still&gt; &lt;/header&gt;&lt;/div&gt; ä¸ºäº†æ›´ç®€å•ç›´è§‚åœ°åšåˆ°resetï¼Œä½ å¯ä»¥ä½¿ç”¨æ–‡ç« é¡¶éƒ¨çš„ç»§æ‰¿çš„ä»£ç æ®µï¼Œç»§æ‰¿çš„å€¼å°±ä¼šè¢«ä¿ç•™ã€‚123456 html&#123; box-sizing: border-box;&#125;*, *:before, *:after&#123; box-sizing:inherit;&#125; è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆåºå¤§çš„ä¸œè¥¿ã€‚ä½ å¯èƒ½å·²ç»åœ¨ä½¿ç”¨ box-sizing reset çš„è€åŠæ³•ï¼Œå¹¶ä¸”ä»æ²¡è¸©åˆ°è¿™ä¸ªå‘ã€‚ä½†æ˜¯ï¼Œåªè¦æˆ‘ä»¬æ¨å¹¿ä¸€ä¸ªâ€œæœ€ä½³å®è·µâ€é£æ ¼çš„ç‰‡æ®µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ…¢æ…¢æŠŠå®ƒå˜æˆæœ€å¥½çš„ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017-09-05-ç¿»è¯‘äº†ç¬¬ä¸€ç¯‡è‹±æ–‡æ–‡æ¡£]]></title>
    <url>%2F2017%2F09%2F05%2F2017-09-05%20%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%BF%BB%E8%AF%91MDN%E6%96%87%E6%A1%A3%2F</url>
    <content type="text"><![CDATA[9æœˆ4æ—¥ç¿»è¯‘äº†MDNä¸Šçš„ä¸€ç¯‡è‹±æ–‡æ–‡æ¡£ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡å°è¯•ç¿»è¯‘ï¼Œå°åˆ°äº†æˆå°±æ„Ÿ. MDNæ˜¯Webå¼€å‘è€…çš„å‚è€ƒæ–‡æ¡£çš„å®˜æ–¹ç½‘ç«™â€”â€”MDN Web æ–‡æ¡£ï¼Œæœ‰å¤§é‡å¼€å‘è€…ä¸æ–­è´¡çŒ®å’Œæ›´æ–°æ–‡æ¡£å’Œæ•™ç¨‹ã€‚ åšäº†ä»€ä¹ˆæœ€è¿‘ï¼Œåœ¨å¯¹JavaScriptä¸­thiså…³é”®å­—çš„ç»†èŠ‚æ•´ç†ä¸­ï¼ŒæŸ¥é˜…MDNçš„ä¸­æ–‡æ–‡æ¡£ï¼Œæœ‰äº›è¯­å¥ç¿»è¯‘çš„ä¸é”™ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨éƒ¨åˆ†ç–æ¼ã€‚ ä»”ç»†ä¸€ç•ªMDNçš„ä¸€äº›ä¸­æ–‡æ–‡æ¡£ï¼Œå°‘æ•°æ–‡æ¡£çš„éƒ¨åˆ†è¯­å¥æœ‰æ˜æ˜¾çš„è¯­ä¹‰å’Œå†…å®¹ä¸Šçš„æ¯›ç—…ã€‚ ç´¢æ€§å»çœ‹è‹±æ–‡æ–‡æ¡£ï¼Œè±ç„¶å¼€æœ—ï¼Œé‚å†³å®šæ›´æ–°ä¸­æ–‡ç¿»è¯‘æ–‡æ¡£ã€‚ åœ¨9æœˆ4æ—¥ç¿»è¯‘äº†MDNä¸ŠJavaScriptçš„thiså…³é”®å­—çš„è‹±æ–‡æ–‡æ¡£ï¼šåŸç‰ˆè‹±æ–‡æ–‡æ¡£ã€‚ ä¿ç•™äº†éƒ¨åˆ†åŸæœ‰ç¿»è¯‘ï¼Œçº æ­£äº†å¤§éƒ¨åˆ†è¯­ä¹‰æªè¾æ¼æ´ï¼Œå¹¶æ›´æ–°äº†å…³äºç®­å¤´å‡½æ•°çš„thisæŒ‡å‘ã€‚ éƒ¨åˆ†è¯­å¥å‚è€ƒäº†è°·æ­Œç¿»è¯‘ï¼Œæˆ‘æ‰¿è®¤è°·æ­Œç¿»è¯‘çœŸçš„å¾ˆNBã€‚ æœ‰ä»€ä¹ˆæ€»ç»“ è¦å½»åº•å¼„æ‡‚thisçš„æœºåˆ¶ï¼Œé¦–å…ˆä½ è¦å‡†å¤‡å¥½é¢å‘å¯¹è±¡çš„åŸºç¡€ï¼Œç†è§£OOPçš„é‡è¦æ¦‚å¿µï¼š JavaScripté¢å‘å¯¹è±¡ç¼–ç¨‹ ç„¶åè®°ä½ï¼Œthisæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚å†çœ‹æˆ‘çš„æ–‡æ¡£: thiså…³é”®å­— åœ¨è¿‡ç¨‹ä¸­çœ‹ä¸æ‡‚æ—¶ï¼ŒåŠæ—¶æŸ¥é˜…ç›¸å…³APIçš„æ–‡æ¡£: ç®­å¤´å‡½æ•° Function.prototype.call() Function.prototype.apply() Function.prototype.bind() å†™åœ¨ç»“å°¾åœ¨è‹±æ–‡æ–‡æ¡£æœ«å°¾çš„å‚è€ƒé“¾æ¥ï¼Œæœ‰ä¸€ç¯‡å†™å¾—éå¸¸ç²¾å½©çš„åšå®¢ï¼šGentle-explanation-of-this-in-JavaScript, æ¸©å’Œè§£é‡ŠJSä¸­çš„this è®¡åˆ’åœ¨ä¸ä¹…å°†æ¥ï¼Œæˆ‘ä¼šæŒ¤å‡ºæ—¶é—´è®¤çœŸç¿»è¯‘è¿™ç¯‡è‹±æ–‡åšå®¢ã€‚ The end.]]></content>
      <categories>
        <category>æ—¥å¿—</category>
      </categories>
      <tags>
        <tag>æ—¥å¿—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017-12-03 æ—¥è®°ï¼šæ‘ä¸Šæ˜¥æ ‘çš„æ–‡æ‘˜]]></title>
    <url>%2F2017%2F07%2F22%2F2017-12-03%20%E9%9A%8F%E7%AC%94%2F</url>
    <content type="text"><![CDATA[2017-12-03 æ—¥è®°æ‘ä¸Šæ˜¥æ ‘ï¼Œä»29å²å¼€å§‹å†™ä½œï¼Œä»33å²å¼€å§‹åšæŒè·‘æ­¥ã€‚ äººç”Ÿå“ªæœ‰é‚£ä¹ˆå¤šå¤ªæ™šï¼Œéƒ½æ˜¯æ‡’æƒ°å’Œææƒ§çš„å€Ÿå£ç½¢äº†ã€‚ ä¸€äº›äººä¸åŠªåŠ›ä¾¿å¾—ä¸åˆ°çš„ä¸œè¥¿ï¼Œæœ‰äº›äººå´å‹¿éœ€åŠªåŠ›ä¾¿å”¾æ‰‹å¯å¾—ã€‚ åœ¨å­¦æ ¡é‡Œï¼Œæˆ‘ä»¬å­¦åˆ°çš„æœ€é‡è¦çš„ä¸œè¥¿ï¼Œå°±æ˜¯â€œæœ€é‡è¦çš„ä¸œè¥¿åœ¨å­¦æ ¡é‡Œå­¦ä¸åˆ°â€è¿™ä¸ªçœŸç†ã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reacté¡¹ç›®ä¸­çš„é«˜é¢‘ES6è¯­æ³•]]></title>
    <url>%2F2017%2F07%2F08%2F2017-07-08%20React%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%AB%98%E9%A2%91ES6%E8%AF%AD%E6%B3%95%2F</url>
    <content type="text"><![CDATA[åœ¨å­¦ä¹ Reactè¿‡ç¨‹ä¸­ï¼Œæ³¨æ„åˆ°æ— è®ºæ˜¯GitHubä¸Šçš„Demoè¿˜æ˜¯Reactç›¸å…³æ–‡æ¡£ï¼ŒES6è¯­æ³•éƒ½æœ‰å¤§é‡ä½¿ç”¨ã€‚å¦‚æœä¸äº†è§£å…¶ä¸­ä¸€äº›è¯­æ³•ï¼Œå­¦ä¹ æ›²çº¿å°±ä¼šè¶Šæ¥è¶Šé™¡å³­ã€‚ä½†æ˜¯è¦ç³»ç»Ÿå­¦ä¹ ES6ï¼Œåˆä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ã€‚ åœ¨è¿™ç¯‡åšå®¢é‡Œï¼Œæˆ‘æŠŠä¸€äº›å¸¸ç”¨çš„ES6è¯­æ³•åšä¸€äº›æ€»ç»“ï¼Œä»¥æ›´å¿«æ›´å¥½åœ°ç†è§£Reactä¸­çš„æ¦‚å¿µå’Œç”¨æ³•ã€‚ åœ¨çº¿ç»ƒä¹ ES6çš„å·¥å…·ï¼šES6 fiddle 1. let &amp; constES6çš„ä¸¤ä¸ªæ–°å…³é”®å­—ï¼Œä¸»è¦æ˜¯å¼•å…¥äº†å—çº§ä½œç”¨åŸŸï¼Œä¸å­˜åœ¨å˜é‡æå‡ï¼Œä¸å…è®¸é‡å¤å®šä¹‰ç­‰ç‰¹æ€§ï¼Œå‡å°‘äº†ES5ä¸­å¾ˆå®¹æ˜“è¸©åˆ°çš„åœ°é›·ã€‚constç”¨æ¥å®šä¹‰å¸¸é‡ï¼Œä¸å…è®¸åæœŸä¿®æ”¹èµ‹å€¼ã€‚å‚è€ƒæ–‡æ¡£ï¼šé˜®ä¸€å³°çš„åšå®¢ 2.è§£æ„èµ‹å€¼ å¸¸è§„ç”¨æ³•ï¼š 12let &#123;x&#125; = &#123;x:1, y:2&#125;let &#123; PropTypes &#125; = React è¿™é‡Œæ˜¯å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œç­‰åŒäºlet PropTypes = React.PropTypes è¿™é‡Œå…¶å®åŒ…å«äº†ä¸¤æ­¥ï¼š å£°æ˜å˜é‡PropTypes; ç»™å…¶èµ‹å€¼ä¸ºReact.PropTypesã€‚ æ‰€ä»¥ç­‰æ•ˆäºè¿™æ ·çš„å†™æ³•ï¼š 12let PropTypes&#123; PropTypes &#125; = React; å¯ä»¥åŒæ—¶å†™å¤šä¸ªå˜é‡ï¼š 1let &#123; PropTypes, Component &#125; = React; å¦‚æœæƒ³å®šä¹‰çš„å˜é‡åå’Œå±æ€§åä¸ä¸€æ ·ï¼š 123//å£°æ˜x1å˜é‡ï¼Œèµ‹å€¼ä¸º1. //xæ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ä¹Ÿä¸ä¼šè¢«èµ‹å€¼let &#123; x : x1 &#125; = &#123; x:1, y:2 &#125; å¯¹è±¡ï¼Œ æ•°ç»„ï¼Œ å­—ç¬¦ä¸²ç­‰éƒ½æœ‰è§£æ„èµ‹å€¼çš„ç”¨æ³•ã€‚ å‚è€ƒæ–‡æ¡£ï¼šè§£æ„èµ‹å€¼ 3.å¯¹è±¡çš„æ‹“å±•3.1 å±æ€§çš„ç®€æ´è¡¨è¾¾å¼let x = &apos;123&apos;; //ç­‰åŒäºï¼šlet obj = { x: x, y: &apos;33} let obj = {x, y: &apos;33&apos; }; 3.2 æ–¹æ³•åçš„ç®€å†™12345let User = &#123; method ()&#123; //ç­‰åŒäºmethod: function()&#123;...&#125; //... &#125;&#125; 3.3å±æ€§åè¡¨è¾¾å¼12345 let key = 'id'; let obj = &#123; [key] : '1010', //æ³¨æ„æ–¹æ‹¬å· ['use' + 'name' ]: 'x'&#125; æŠŠè¡¨è¾¾å¼å†™åœ¨ [] ä¸­ï¼Œ è¡¨è¾¾å¼çš„å€¼ä½œä¸ºå­—æ®µåç§°ï¼š 1234 let obj = &#123; id : '1010', usename: 'x'&#125; æ³¨æ„ï¼šå±æ€§åè¡¨è¾¾å¼ä¸å±æ€§åç®€å†™ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼š 12345 let key = 'id'; let id = '1010'; let obj =&#123; [key]&#125; //Error! 4. ES6 Classè¯­æ³•ä½¿ç”¨ES6è¯­æ³•å®šä¹‰ä¸€ä¸ªReactç»„ä»¶ï¼š 123456789101112131415161718192021export class Counter extends React.Component&#123; constructor(props)&#123; super(props); this.state = &#123;count: props.initialCount&#125;; this.tick = this.tick.bind(this); &#125; tick()&#123; this.setState(&#123;count: this.state.count + 1&#125;); &#125; render()&#123; return ( &lt;div onClick = &#123;this.tick&#125; &lt;/div&gt; ); &#125;&#125;Counter.propTypes = &#123; initialCount : Reart.PropTypes.number &#125;;Counter.defaultProps = &#123; initialCount: 0 &#125;; æ³¨æ„ï¼š ES6çš„ç»§æ‰¿è¯­æ³•ï¼š extendså…³é”®å­—ï¼› å„ä¸ªæ–¹æ³•ä½¿ç”¨äº†æ–¹æ³•ç®€å†™ï¼Œå¦‚tick(){}å’Œrender(){}, æ–¹æ³•ä¹‹é—´ä¸åŠ  â€œ,â€ï¼› constructor æ˜¯æ„é€ å‡½æ•°ï¼Œ å¯ä»¥æ›¿ä»£getInitialState ï¼› æ„é€ å‡½æ•°å†…éœ€è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼šsuper(props) , å¦åˆ™å°±ä¼šæŠ¥é”™ã€‚å› ä¸ºå­ç±»æ²¡æœ‰è‡ªèº«çš„this å¯¹è±¡ï¼Œéœ€è¦ä»çˆ¶ç±»ç»§æ‰¿ã€‚ this.tick = this.tick.bind(this)ä¸­ï¼Œ ä½¿ç”¨bindæ¥ç»‘å®šæ‰§è¡Œä½œç”¨åŸŸï¼ˆä½¿ç”¨React.createClassæ˜¯è‡ªåŠ¨ç»‘å®šçš„), ä¹Ÿå¯ä»¥åœ¨renderä¸­ç›‘å¬äº‹ä»¶çš„ä½ç½®ï¼Œä½¿ç”¨bind(this): 12345678910 &lt;div onClick= &#123;this.tick.bind(this)&#125;&gt; Clicks: &#123;this.state.count&#125; &lt;/div&gt; ``` **å®˜æ–¹å»ºè®®ç»Ÿä¸€å†™åœ¨constructorä¸­ï¼Œè¿™æ ·å­è¯¥æ–¹æ³•å°±åªéœ€ç»‘å®šä¸€æ¬¡ã€‚**6. é™¤äº†ä½¿ç”¨bind, è¿˜å¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼š``` jsx &lt;div onClick = &#123;() =&gt; this.tick()&#125;&gt; Clicks: &#123;this.state.count&#125; &lt;/div&gt; ç®­å¤´å‡½æ•°çš„ç‰¹æ€§ï¼šå‡½æ•°ä½“å†…çš„thiså°±æ˜¯å®šä¹‰æ˜¯çš„å¯¹è±¡ï¼Œ è€Œéè°ƒç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚ç®­å¤´å‡½æ•°çš„thisæŒ‡å‘æ˜¯å›ºå®šçš„ï¼Œ è€Œæ™®é€šå‡½æ•°æ˜¯å¯å˜çš„ã€‚ 5. ç®­å¤´å‡½æ•° ES6å…è®¸ä½¿ç”¨ =&gt; æ¥å®šä¹‰å‡½æ•°ï¼š 12345let f = v =&gt; v+2//ç­‰åŒäºlet f = function(v)&#123; return v + 2;&#125; å¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼š 1234567891011 let f = (x ,y) =&gt; x + y;``` - å‡½æ•°æœ‰å¤šæ¡è¯­å¥ï¼Œ ç”¨å¤§æ‹¬å·åŒ…è£…ï¼š``` js let f = (x,y) =&gt; &#123; x = x + 11; y = y + 33; return x + y; &#125; ç®­å¤´å‡½æ•°çš„thisæŒ‡å‘èƒ½ä¿æŒä¸å˜ï¼Œ ä¸æ˜¯å› ä¸ºå†…éƒ¨æœ‰ç»‘å®šæœºåˆ¶ï¼Œ è€Œæ˜¯å› ä¸ºï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œ å¯¼è‡´ä»£ç å†…çš„thiså°±æ˜¯å¤–å±‚ä»£ç å—çš„thisã€‚ å‚è€ƒæ–‡æ¡£ï¼š ç®­å¤´å‡½æ•° 6. export &amp; import exportç”¨äºè¾“å‡ºæ¨¡å—å¯¹å¤–çš„æ¥å£ï¼Œ importç”¨äºå¯¼å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚ 12345export let client = "App" //è¾“å‡ºå˜é‡export function mul(x, y)&#123; //è¾“å‡ºå‡½æ•° return x + y;&#125;export class Toast()&#123;&#125; //è¾“å‡ºç±» ä¹Ÿå¯ä»¥ç»Ÿä¸€è¾“å‡ºï¼š 123456//æ–‡ä»¶åï¼š Util.jslet client = 'App';function mul (x , y)&#123; return x + y;&#125;export &#123; client, mul &#125; é‚£ä¹ˆåˆ«çš„ç»„ä»¶å°±è¦è¿™æ ·å¯¼å…¥å®ƒï¼š 1import &#123;client, mul&#125; from './Util.js' è¿˜å¯ä»¥æ‰“åŒ…å¯¼å…¥ï¼š 12import * as U from './Util.js'U.client //ä½¿ç”¨U å¸¸ç”¨çš„ export default å‘½ä»¤ï¼Œ ç”¨äºè¾“å‡ºé»˜è®¤çš„æ–¹æ³•ï¼Œ å˜é‡æˆ–ç±»ï¼š 123export default React.createClass(&#123; //...&#125;) å¼•å…¥çš„æ—¶å€™å°±æ›´æ–¹ä¾¿ï¼Œ å¯ä»¥éšæ„æŒ‡å®šåç§°ï¼š 1import Tab from 'tab'; å‚è€ƒæ–‡æ¡£ï¼šexport&amp;import 7. å¯¹è±¡çš„æ‹“å±•è¿ç®—ç¬¦: â€œâ€¦â€æ‹“å±•è¿ç®—ç¬¦åœ¨Reduxçš„ç¤ºä¾‹Demoä¸­å¾ˆå¸¸è§ã€‚ æ‹“å±•è¿ç®—ç¬¦å¯ä»¥ç”¨æ¥åˆå¹¶ä¸¤ä¸ªå¯¹è±¡ï¼š 123//state = &#123; name: 'y' &#125;return &#123;...state, name: 'x', id: 101 &#125;//è¿”å› &#123; name: 'x', id: 101 &#125; ä¸Šé¢ä»£ç æœ‰ä¸¤ä¸ªè¿‡ç¨‹:1.å»é™¤stateå¯¹è±¡çš„æ‰€æœ‰å¯æ¯”æ¡ˆä¾‹å±æ€§ï¼Œ æ‹·è´åˆ°å½“å‰å¯¹è±¡ä¸Šï¼› 2.å¦‚æœè‡ªå®šä¹‰çš„å±æ€§åœ¨åé¢ï¼Œ æ‹“å±•è¿ç®—ç¬¦çš„åŒåå±æ€§ä¼šè¢«è¦†ç›–ã€‚ è¿™ç§ç”¨æ³•ç­‰åŒäº Object.assign: 1234567891011121314 //assignå­—é¢æ„æ€ä¸ºåˆ†é… Object.assign(&#123;&#125;, state, &#123;name: 'x', id:101&#125;)``` - ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦éœ€è¦å®‰è£…`transform-object-rest-spread`æ’ä»¶ï¼Œ ç„¶ååœ¨babelä¸­é…ç½®ã€‚ é…ç½®å¦‚ä¸‹ï¼š``` jstest: /\.js$/,exclude: /node_modules/,loader: 'babel',query:&#123; presets: ['react', 'es2015'], plugins: ["transform-object-rest-spread"]&#125; å‚è€ƒæ–‡æ¡£ï¼šES6æ‹“å±•è¿ç®—ç¬¦ The End.]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Macå®‰è£…Sassä¸‡èƒ½æ–¹æ³•]]></title>
    <url>%2F2017%2F06%2F07%2F2017-06-07%20Mac%E5%AE%89%E8%A3%85Sass%E4%B8%87%E8%83%BD%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[Mac OSXç³»ç»Ÿä¸‹ä½¿ç”¨RVMä¿®å¤å®‰è£…Sassçš„é”™è¯¯è¿™ä¸ªä¸‡é‡‘æ²¹æ–¹æ³•èƒ½è§£å†³å¤§å¤šæ•°çš„gemå®‰è£…é—®é¢˜ã€‚ å¦‚æœä½ ä½¿ç”¨é€šç”¨çš„gem install sass å‡ºç°é”™è¯¯ï¼š 12ERROR: While executing gem ... (Errno::EACCES) Permission denied - /var/lib/gems é‚£ä¹ˆè¿™ç¯‡æ–‡ç« ä¹Ÿè®¸èƒ½è§£å†³ä½ çš„é—®é¢˜ã€‚ è¿™ä¸ªé”™è¯¯è¯´æ˜Rubyçš„æƒé™æœ‰é—®é¢˜ï¼Œè¦è§£å†³è¿™ä¸ªæƒé™é—®é¢˜å¾ˆéº»çƒ¦ï¼Œä¸è¿‡æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥è·³è¿‡è¿™ä¸ªå‘ï¼š ä½¿ç”¨RVM(Ruby Version Manager)å®‰è£…ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„Rubyï¼Œå†å®‰è£…sassã€‚ ä»¥ä¸‹æ­¥éª¤éƒ½åœ¨Terminal(ç»ˆç«¯)ä¸­å®Œæˆ! 1. å®‰è£…Homebrew/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; 2. å®‰è£…gpgå®‰è£…RVMä¹‹å‰éœ€è¦gpgï¼Œå…ˆåˆ«ç®¡å®ƒæ˜¯ä»€ä¹ˆã€‚ å®ƒæ˜¯ mpapis public key å…¬é’¥ç”¨äºéªŒè¯å®‰è£…åŒ…ä»¥ç¡®ä¿å®‰å…¨ã€‚ å¦‚æœä½ æƒ³çŸ¥é“å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œç‚¹å‡»è¿™é‡ŒGNU-wikiç™¾ç§‘ã€‚ brew install gnupg 3. å®‰è£…gpgå¯†é’¥gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB 4. å®‰è£…RVM\curl -sSL https://get.rvm.io | bash -s stable --ruby 5. å¼€å§‹ä½¿ç”¨RVM1. æŸ¥çœ‹å·²æœ‰Rubyç‰ˆæœ¬:1rvm list å¦‚æœå‡ºç°è­¦å‘Šï¼Œå¦‚ï¼šâ€œWarning! PATH is not properly set upâ€¦â€ ï¼Œè¿™æ˜¯æœªæ·»åŠ RVMç¯å¢ƒå˜é‡ï¼Œè¯·å‚è€ƒè§£å†³æ–¹æ¡ˆ.æˆ–è€…ä½ ç›´æ¥Copyä¸‹é¢çš„æŒ‡ä»¤ï¼š 1[[ -s &quot;$HOME/.rvm/scripts/rvm&quot; ]] &amp;&amp; source &quot;$HOME/.rvm/scripts/rvm&quot; 2. æ£€æŸ¥Rubyç‰ˆæœ¬åˆ—è¡¨ï¼šä¸å¿…è¾“å…¥ä¸‹é¢çš„ä»£ç ï¼Œè¿™æ˜¯è¾“å…¥rvm liståçš„ç»“æœï¼1234567rvm rubies=* ruby-2.2.0 [ x86_64 ]# =&gt; - current# =* - current &amp;&amp; default# * - default 3. å®‰è£…ç‰¹å®šç‰ˆæœ¬Rubyï¼šrvm use ruby --default æ£€æŸ¥rubyä½ç½®ï¼š which ruby å¦‚æœæ˜¾ç¤ºäº†ä¸€è¡Œç›®å½•ï¼Œåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ ruby -v 6. å®‰è£…sassgem install sass 7. å®‰è£…å®Œæˆï¼ å‚è€ƒæ–‡ç« ï¼šRuby on Mac OSX with RVM]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>æŒ‡å— ç¬”è®° Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€è¿°ç½‘ç»œåŸç†å’Œä¼˜åŒ–]]></title>
    <url>%2F2017%2F06%2F06%2F2017-06-06%20%E5%89%8D%E7%AB%AF%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E5%92%8C%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[1. ä¸€ä¸ªé¡µé¢ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 1.1 æµè§ˆå™¨å¤„ç†è¯·æ±‚æµè§ˆå™¨å¼€å¯ä¸€ä¸ªçº¿ç¨‹å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¯¹URLåˆ†æåˆ¤æ–­ï¼Œå¦‚æœæ˜¯HTTPåè®®ï¼Œå°±æŒ‰Webæ–¹å¼å¤„ç†ã€‚ 1.2 æµè§ˆå™¨å¤„ç†URLè°ƒç”¨æµè§ˆå™¨å†…æ ¸ä¸­çš„å¯¹åº”æ–¹æ³•ï¼Œæ¯”å¦‚WebViewä¸­çš„loadUrlæ–¹æ³•ã€‚ 1.3 DNSè§£æé€šè¿‡DNSè§£æï¼Œè·å–åŸŸåçš„IPåœ°å€ï¼Œè®¾ç½®UAç­‰ä¿¡æ¯å‘å‡ºç¬¬äºŒä¸ªGETè¯·æ±‚ã€‚ 1.4 å»ºç«‹è¿æ¥è¿›è¡ŒHTTPåè®®å›è¯ï¼Œå®¢æˆ·ç«¯å‘é€æŠ¥å¤´ï¼ˆè¯·æ±‚æŠ¥å¤´ï¼‰ï¼› 1.5 æœåŠ¡å™¨ç³»ç»Ÿå“åº”è¿›å…¥åˆ°WebæœåŠ¡å™¨ä¸Šçš„Web Serverï¼Œ å¦‚Apache ã€Tomcat ã€ Node.JS ç­‰æœåŠ¡å™¨ã€‚ 1.6 æœåŠ¡å™¨ç¨‹åºå¤„ç†è¿›å…¥éƒ¨ç½²å¥½çš„åç«¯åº”ç”¨ï¼Œå¦‚PHPã€Javaã€JavaScriptã€Pythonç­‰ï¼Œæ‰¾åˆ°ç›¸åº”çš„è¯·æ±‚å¤„ç†ã€‚ 1.7 æœåŠ¡å™¨å¤„ç†å®Œæˆï¼Œè¿”å›æ•°æ®å¤„ç†ç»“æŸå›é¦ˆæŠ¥å¤´ï¼Œæ­¤å¤„å¦‚æœæµè§ˆå™¨è®¿é—®è¿‡ï¼Œç¼“å­˜ä¸Šæœ‰å¯¹åº”èµ„æºï¼Œä¼šä¸æœåŠ¡å™¨æœ€åä¿®æ”¹æ—¶é—´å¯¹æ¯”ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™è¿”å›304. 1.8 æµè§ˆå™¨å¼€å§‹ä¸‹è½½HTMLæµè§ˆå™¨å¼€å§‹ä¸‹è½½HTMLæ–‡æ¡£(å“åº”æŠ¥å¤´ï¼ŒçŠ¶æ€ç 200)ï¼ŒåŒæ—¶ä½¿ç”¨ç¼“å­˜ã€‚ 1.9 DOMæ ‘å»ºç«‹ï¼ŒåŠ è½½å¤–éƒ¨æ–‡ä»¶æ–‡æ¡£æ ‘å¼€å§‹å»ºç«‹ï¼Œæ ¹æ®æ ‡è®°è¯·æ±‚æ‰€éœ€æŒ‡å®šMIMEç±»å‹çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚CSSï¼ŒJSï¼‰ï¼ŒåŒæ—¶è®¾ç½®Cookieã€‚ 1.10 é¡µé¢æ¸²æŸ“é¡µé¢å¼€å§‹æ¸²æŸ“DOMï¼ŒJSæ ¹æ®DOM APIæ“ä½œDOMï¼Œæ‰§è¡Œäº‹ä»¶ç»‘å®šç­‰ï¼Œé¡µé¢æ˜¾ç¤ºå®Œæˆã€‚ 2. HTTPçŠ¶æ€ç  100 ç»§ç»­ï¼Œ ä¸€èˆ¬åœ¨å‘é€postè¯·æ±‚æ—¶ï¼Œ å·²å‘é€äº†http headerä¹‹åï¼ŒæœåŠ¡å™¨å°†è¿”å›æ­¤ä¿¡æ¯ï¼Œè¡¨ç¤ºç¡®è®¤ã€‚ 200 æ­£å¸¸è¿”å›ä¿¡æ¯ 201 è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº 202 æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç† 301 æ°¸ä¹…é‡å®šå‘ 302 ä¸´æ—¶é‡å®šå‘ 303 ä¸´æ—¶é‡å®šå‘ï¼Œä¸”æ€»æ˜¯ä½¿ç”¨GETè¯·æ±‚æ–°çš„URI 304 èµ„æºæœªä¿®æ”¹ï¼Œè‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚ 400 è¯·æ±‚æ ¼å¼é”™è¯¯ï¼Œå®¢æˆ·ç«¯ä¸åº”å½“å†çŠ¯åŒæ ·çš„é”™è¯¯ 401 è¯·æ±‚æœªæˆæƒ 403 ç¦æ­¢è®¿é—® 404 æ‰¾ä¸åˆ°èµ„æº 500 æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ 502 ç½‘å…³é”™è¯¯ 503 æœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ï¼Œå¯èƒ½æ˜¯è¿‡è½½æˆ–è€…ç»´æŠ¤ 3. å‰ç«¯æ€§èƒ½ä¼˜åŒ–3.1 å‡å°‘httpè¯·æ±‚æ¬¡æ•°CSSé›ªç¢§å›¾ï¼ŒJSã€CSSä»£ç å‹ç¼©ï¼Œå›¾ç‰‡å‹ç¼©ï¼› ç½‘é¡µGzipï¼ŒCDNæ‰˜ç®¡ï¼Œdataç¼“å­˜ï¼Œåˆ†ç¦»å›¾ç‰‡æœåŠ¡å™¨ã€‚ 3.2 å‰ç«¯æ¨¡æ¿ä¼˜åŒ–ç²¾ç®€HTMLæ ‡ç­¾ï¼Œé¿å…å¸¦å®½æµªè´¹ã€‚ ç”¨å˜é‡ä¿å­˜AJAXè¯·æ±‚ç»“æœï¼Œæ¯æ¬¡æ“ä½œæœ¬åœ°å˜é‡ï¼Œä¸ç”¨è¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°ã€‚ 3.3 DOMæ“ä½œç”¨innerHTMLä»£æ›¿DOMæ“ä½œï¼Œå‡å°‘DOMæ“ä½œæ¬¡æ•°ï¼Œä¼˜åŒ–JavaScriptæ€§èƒ½ã€‚ ç¼“å­˜DOMèŠ‚ç‚¹æŸ¥æ‰¾çš„ç»“æœï¼Œå‡å°‘IOè¯»å–æ“ä½œã€‚ 3.4 é¿å…ç›´æ¥æ“ä½œstyleå½“éœ€è¦è®¾ç½®çš„æ ·å¼å¾ˆå¤šæ—¶ï¼Œè®¾ç½®classNameï¼Œè€Œéç›´æ¥æ“ä½œstyleã€‚ 3.5 å°‘ç”¨å…¨å±€å˜é‡]]></content>
      <categories>
        <category>ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•åº”å¯¹CSRFæ”»å‡»]]></title>
    <url>%2F2017%2F05%2F23%2F2017-05-23%20%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6CSRF%2F</url>
    <content type="text"><![CDATA[ä½œä¸ºWebå®‰å…¨æ•°ä¸€æ•°äºŒçš„éšæ‚£ï¼ŒCSRFä¸€ç›´è®©å¼€å‘äººå‘˜å¤´ç–¼ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†CSRFæ”»å‡»çš„æ¦‚å¿µï¼Œå±å®³ï¼Œæ¡ˆä¾‹å’Œè§£å†³æ–¹æ¡ˆï¼Œä¸ºç½‘ç«™å®‰å…¨ä¼˜åŒ–ç†æ¸…æ€è·¯ã€‚ ä¸€ã€CSRFçš„æ¥é¾™å»è„‰1. ä»€ä¹ˆæ˜¯CSRFï¼ŸCSRFï¼ˆCross Site Request Forgery, è·¨ç«™åŸŸè¯·æ±‚ä¼ªé€ ï¼‰æ˜¯ä¸€ç§ç½‘ç»œçš„æ”»å‡»æ–¹å¼ï¼Œå®ƒåœ¨ 2007 å¹´æ›¾è¢«åˆ—ä¸ºäº’è”ç½‘ 20 å¤§å®‰å…¨éšæ‚£ä¹‹ä¸€ã€‚å…¶ä»–å®‰å…¨éšæ‚£ï¼Œæ¯”å¦‚ SQL è„šæœ¬æ³¨å…¥ï¼Œè·¨ç«™åŸŸè„šæœ¬æ”»å‡»ç­‰åœ¨è¿‘å¹´æ¥å·²ç»é€æ¸ä¸ºä¼—äººç†ŸçŸ¥ï¼Œå¾ˆå¤šç½‘ç«™ä¹Ÿéƒ½é’ˆå¯¹ä»–ä»¬è¿›è¡Œäº†é˜²å¾¡ã€‚ç„¶è€Œï¼Œå¯¹äºå¤§å¤šæ•°äººæ¥è¯´ï¼ŒCSRF å´ä¾ç„¶æ˜¯ä¸€ä¸ªé™Œç”Ÿçš„æ¦‚å¿µã€‚å³ä¾¿æ˜¯å¤§åé¼é¼çš„ Gmail, åœ¨ 2007 å¹´åº•ä¹Ÿå­˜åœ¨ç€ CSRF æ¼æ´ï¼Œä»è€Œè¢«é»‘å®¢æ”»å‡»è€Œä½¿ Gmail çš„ç”¨æˆ·é€ æˆå·¨å¤§çš„æŸå¤±ã€‚ 2. CSRFæ”»å‡»å®ä¾‹CSRF æ”»å‡»å¯ä»¥åœ¨å—å®³è€…æ¯«ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ä»¥å—å®³è€…åä¹‰ä¼ªé€ è¯·æ±‚å‘é€ç»™å—æ”»å‡»ç«™ç‚¹ï¼Œä»è€Œåœ¨å¹¶æœªæˆæƒçš„æƒ…å†µä¸‹æ‰§è¡Œåœ¨æƒé™ä¿æŠ¤ä¹‹ä¸‹çš„æ“ä½œã€‚ æ¯”å¦‚è¯´ï¼Œå—å®³è€… Bob åœ¨é“¶è¡Œæœ‰ä¸€ç¬”å­˜æ¬¾ï¼Œé€šè¿‡å¯¹é“¶è¡Œçš„ç½‘ç«™å‘é€è¯·æ±‚ http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=bob2 å¯ä»¥ä½¿ Bob æŠŠ 1000000 çš„å­˜æ¬¾è½¬åˆ° bob2 çš„è´¦å·ä¸‹ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œè¯¥è¯·æ±‚å‘é€åˆ°ç½‘ç«™åï¼ŒæœåŠ¡å™¨ä¼šå…ˆéªŒè¯è¯¥è¯·æ±‚æ˜¯å¦æ¥è‡ªä¸€ä¸ªåˆæ³•çš„ sessionï¼Œå¹¶ä¸”è¯¥ session çš„ç”¨æˆ· Bob å·²ç»æˆåŠŸç™»é™†ã€‚ Mallory å¯ä»¥è‡ªå·±å‘é€ä¸€ä¸ªè¯·æ±‚ç»™é“¶è¡Œï¼š http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory ä½†æ˜¯è¿™ä¸ªè¯·æ±‚æ¥è‡ª Mallory è€Œé Bobï¼Œä»–ä¸èƒ½é€šè¿‡å®‰å…¨è®¤è¯ï¼Œå› æ­¤è¯¥è¯·æ±‚ä¸ä¼šèµ·ä½œç”¨ã€‚ src=â€http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory â€ å¹¶ä¸”é€šè¿‡å¹¿å‘Šç­‰è¯±ä½¿ Bob æ¥è®¿é—®ä»–çš„ç½‘ç«™ã€‚ å½“ Bob è®¿é—®è¯¥ç½‘ç«™æ—¶ï¼Œä¸Šè¿° url å°±ä¼šä» Bob çš„æµè§ˆå™¨å‘å‘é“¶è¡Œï¼Œè€Œè¿™ä¸ªè¯·æ±‚ä¼šé™„å¸¦ Bob æµè§ˆå™¨ä¸­çš„ cookie ä¸€èµ·å‘å‘é“¶è¡ŒæœåŠ¡å™¨ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥è¯·æ±‚ä¼šå¤±è´¥ï¼Œå› ä¸ºä»–è¦æ±‚ Bob çš„è®¤è¯ä¿¡æ¯ã€‚ ä½†æ˜¯ï¼Œå¦‚æœ Bob å½“æ—¶æ°å·§åˆšè®¿é—®ä»–çš„é“¶è¡Œåä¸ä¹…ï¼Œä»–çš„æµè§ˆå™¨ä¸é“¶è¡Œç½‘ç«™ä¹‹é—´çš„ session å°šæœªè¿‡æœŸï¼Œæµè§ˆå™¨çš„ cookie ä¹‹ä¸­å«æœ‰ Bob çš„è®¤è¯ä¿¡æ¯ã€‚ è¿™æ—¶ï¼Œæ‚²å‰§å‘ç”Ÿäº†ï¼Œè¿™ä¸ª url è¯·æ±‚å°±ä¼šå¾—åˆ°å“åº”ï¼Œé’±å°†ä» Bob çš„è´¦å·è½¬ç§»åˆ° Mallory çš„è´¦å·ï¼Œè€Œ Bob å½“æ—¶æ¯«ä¸çŸ¥æƒ…ã€‚ ç­‰ä»¥å Bob å‘ç°è´¦æˆ·é’±å°‘äº†ï¼Œå³ä½¿ä»–å»é“¶è¡ŒæŸ¥è¯¢æ—¥å¿—ï¼Œä»–ä¹Ÿåªèƒ½å‘ç°ç¡®å®æœ‰ä¸€ä¸ªæ¥è‡ªäºä»–æœ¬äººçš„åˆæ³•è¯·æ±‚è½¬ç§»äº†èµ„é‡‘ï¼Œæ²¡æœ‰ä»»ä½•è¢«æ”»å‡»çš„ç—•è¿¹ã€‚è€Œ Mallory åˆ™å¯ä»¥æ‹¿åˆ°é’±åé€é¥æ³•å¤–ã€‚ 3. CSRFæ”»å‡»çš„å¯¹è±¡åœ¨è®¨è®ºå¦‚ä½•æŠµå¾¡ CSRF ä¹‹å‰ï¼Œå…ˆè¦æ˜ç¡® CSRF æ”»å‡»çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¦ä¿æŠ¤çš„å¯¹è±¡ã€‚ ä»ä»¥ä¸Šçš„ä¾‹å­å¯çŸ¥ï¼ŒCSRF æ”»å‡»æ˜¯é»‘å®¢å€ŸåŠ©å—å®³è€…çš„ cookie éª—å–æœåŠ¡å™¨çš„ä¿¡ä»»ï¼Œä½†æ˜¯é»‘å®¢å¹¶ä¸èƒ½æ‹¿åˆ° cookieï¼Œä¹Ÿçœ‹ä¸åˆ° cookie çš„å†…å®¹ã€‚å¦å¤–ï¼Œå¯¹äºæœåŠ¡å™¨è¿”å›çš„ç»“æœï¼Œç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œé»‘å®¢ä¹Ÿæ— æ³•è¿›è¡Œè§£æã€‚ å› æ­¤ï¼Œé»‘å®¢æ— æ³•ä»è¿”å›çš„ç»“æœä¸­å¾—åˆ°ä»»ä½•ä¸œè¥¿ï¼Œä»–æ‰€èƒ½åšçš„å°±æ˜¯ç»™æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä»¥æ‰§è¡Œè¯·æ±‚ä¸­æ‰€æè¿°çš„å‘½ä»¤ï¼Œåœ¨æœåŠ¡å™¨ç«¯ç›´æ¥æ”¹å˜æ•°æ®çš„å€¼ï¼Œè€Œéçªƒå–æœåŠ¡å™¨ä¸­çš„æ•°æ®ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä¿æŠ¤çš„å¯¹è±¡æ˜¯é‚£äº›å¯ä»¥ç›´æ¥äº§ç”Ÿæ•°æ®æ”¹å˜çš„æœåŠ¡ï¼Œè€Œå¯¹äºè¯»å–æ•°æ®çš„æœåŠ¡ï¼Œåˆ™ä¸éœ€è¦è¿›è¡Œ CSRF çš„ä¿æŠ¤ã€‚ æ¯”å¦‚é“¶è¡Œç³»ç»Ÿä¸­è½¬è´¦çš„è¯·æ±‚ä¼šç›´æ¥æ”¹å˜è´¦æˆ·çš„é‡‘é¢ï¼Œä¼šé­åˆ° CSRF æ”»å‡»ï¼Œéœ€è¦ä¿æŠ¤ã€‚è€ŒæŸ¥è¯¢ä½™é¢æ˜¯å¯¹é‡‘é¢çš„è¯»å–æ“ä½œï¼Œä¸ä¼šæ”¹å˜æ•°æ®ï¼ŒCSRF æ”»å‡»æ— æ³•è§£ææœåŠ¡å™¨è¿”å›çš„ç»“æœï¼Œæ— éœ€ä¿æŠ¤ã€‚ äºŒã€é˜²å¾¡ CSRF çš„å‡ ç§ç­–ç•¥åœ¨ä¸šç•Œç›®å‰é˜²å¾¡ CSRF æ”»å‡»ä¸»è¦æœ‰ä¸‰ç§ç­–ç•¥ï¼š éªŒè¯ HTTP Referer å­—æ®µï¼› åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ  token å¹¶éªŒè¯ï¼› åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯ã€‚ 1. éªŒè¯ HTTP Referer å­—æ®µ1.1 ä»€ä¹ˆæ˜¯Refererï¼Ÿæ ¹æ® HTTP åè®®ï¼Œåœ¨ HTTP å¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå« Refererï¼Œå®ƒè®°å½•äº†è¯¥ HTTP è¯·æ±‚çš„æ¥æºåœ°å€ã€‚ åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®ä¸€ä¸ªå®‰å…¨å—é™é¡µé¢çš„è¯·æ±‚æ¥è‡ªäºåŒä¸€ä¸ªç½‘ç«™ï¼Œæ¯”å¦‚éœ€è¦è®¿é—® http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory ç”¨æˆ·å¿…é¡»å…ˆç™»é™† bank.exampleï¼Œç„¶åé€šè¿‡ç‚¹å‡»é¡µé¢ä¸Šçš„æŒ‰é’®æ¥è§¦å‘è½¬è´¦äº‹ä»¶ã€‚ è¿™æ—¶ï¼Œè¯¥è½¬å¸è¯·æ±‚çš„ Referer å€¼å°±ä¼šæ˜¯è½¬è´¦æŒ‰é’®æ‰€åœ¨çš„é¡µé¢çš„ URLï¼Œé€šå¸¸æ˜¯ä»¥ bank.example åŸŸåå¼€å¤´çš„åœ°å€ã€‚ è€Œå¦‚æœé»‘å®¢è¦å¯¹é“¶è¡Œç½‘ç«™å®æ–½ CSRF æ”»å‡»ï¼Œä»–åªèƒ½åœ¨ä»–è‡ªå·±çš„ç½‘ç«™æ„é€ è¯·æ±‚ï¼Œå½“ç”¨æˆ·é€šè¿‡é»‘å®¢çš„ç½‘ç«™å‘é€è¯·æ±‚åˆ°é“¶è¡Œæ—¶ï¼Œè¯¥è¯·æ±‚çš„ Referer æ˜¯æŒ‡å‘é»‘å®¢è‡ªå·±çš„ç½‘ç«™ã€‚ 1.2 å¦‚ä½•éªŒè¯Refererï¼Ÿå› æ­¤ï¼Œè¦é˜²å¾¡ CSRF æ”»å‡»ï¼Œé“¶è¡Œç½‘ç«™åªéœ€è¦å¯¹äºæ¯ä¸€ä¸ªè½¬è´¦è¯·æ±‚éªŒè¯å…¶ Referer å€¼ï¼Œå¦‚æœæ˜¯ä»¥ bank.example å¼€å¤´çš„åŸŸåï¼Œåˆ™è¯´æ˜è¯¥è¯·æ±‚æ˜¯æ¥è‡ªé“¶è¡Œç½‘ç«™è‡ªå·±çš„è¯·æ±‚ï¼Œæ˜¯åˆæ³•çš„ã€‚å¦‚æœ Referer æ˜¯å…¶ä»–ç½‘ç«™çš„è¯ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯é»‘å®¢çš„ CSRF æ”»å‡»ï¼Œæ‹’ç»è¯¥è¯·æ±‚ã€‚ 1.3 RefereréªŒè¯çš„ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼šè¿™ç§æ–¹æ³•ç®€å•æ˜“è¡Œï¼Œç½‘ç«™çš„æ™®é€šå¼€å‘äººå‘˜ä¸éœ€è¦æ“å¿ƒ CSRF çš„æ¼æ´ï¼Œåªéœ€è¦åœ¨æœ€åç»™æ‰€æœ‰å®‰å…¨æ•æ„Ÿçš„è¯·æ±‚ç»Ÿä¸€å¢åŠ ä¸€ä¸ªæ‹¦æˆªå™¨æ¥æ£€æŸ¥ Referer çš„å€¼å°±å¯ä»¥ã€‚ç‰¹åˆ«æ˜¯å¯¹äºå½“å‰ç°æœ‰çš„ç³»ç»Ÿï¼Œä¸éœ€è¦æ”¹å˜å½“å‰ç³»ç»Ÿçš„ä»»ä½•å·²æœ‰ä»£ç å’Œé€»è¾‘ï¼Œæ²¡æœ‰é£é™©ï¼Œéå¸¸ä¾¿æ·ã€‚ ç¼ºç‚¹ï¼š Referer çš„å€¼æ˜¯ç”±æµè§ˆå™¨æä¾›çš„ï¼Œè™½ç„¶ HTTP åè®®ä¸Šæœ‰æ˜ç¡®çš„è¦æ±‚ï¼Œä½†æ˜¯æ¯ä¸ªæµè§ˆå™¨å¯¹äºRefererçš„å…·ä½“å®ç°å¯èƒ½æœ‰å·®åˆ«ï¼Œå¹¶ä¸èƒ½ä¿è¯æµè§ˆå™¨è‡ªèº«æ²¡æœ‰å®‰å…¨æ¼æ´ã€‚ ä½¿ç”¨éªŒè¯å€¼çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠå®‰å…¨æ€§éƒ½ä¾èµ–äºç¬¬ä¸‰æ–¹ï¼ˆå³æµè§ˆå™¨ï¼‰æ¥ä¿éšœï¼Œä»ç†è®ºä¸Šæ¥è®²ï¼Œè¿™æ ·å¹¶ä¸å®‰å…¨ã€‚äº‹å®ä¸Šï¼Œå¯¹äºæŸäº›æµè§ˆå™¨ï¼Œæ¯”å¦‚ IE6 æˆ– FF2ï¼Œç›®å‰å·²ç»æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ç¯¡æ”¹ Referer å€¼ã€‚å¦‚æœ bank.example ç½‘ç«™æ”¯æŒ IE6 æµè§ˆå™¨ï¼Œé»‘å®¢å®Œå…¨å¯ä»¥æŠŠç”¨æˆ·æµè§ˆå™¨çš„ Referer å€¼è®¾ä¸ºä»¥ bank.example åŸŸåå¼€å¤´çš„åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡éªŒè¯ï¼Œä»è€Œè¿›è¡ŒCSRF æ”»å‡»ã€‚ å¦‚æœç”¨æˆ·ä¸ºäº†ä¿æŠ¤éšç§ï¼Œè€Œè®¾ç½®æµè§ˆå™¨ä½¿å…¶åœ¨å‘é€è¯·æ±‚æ—¶ä¸å†æä¾› Refererã€‚å½“ä»–ä»¬æ­£å¸¸è®¿é—®é“¶è¡Œç½‘ç«™æ—¶ï¼Œç½‘ç«™ä¼šå› ä¸ºè¯·æ±‚Referer å€¼è€Œè®¤ä¸ºæ˜¯ CSRF æ”»å‡»ï¼Œæ‹’ç»åˆæ³•ç”¨æˆ·çš„è®¿é—®ã€‚ 2. åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ  token å¹¶éªŒè¯2.1 é»‘å®¢æ€»æ˜¯èƒ½æ‰¾åˆ°æ¼æ´CSRF æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å¤ŸæˆåŠŸï¼Œæ˜¯å› ä¸ºé»‘å®¢å¯ä»¥å®Œå…¨ä¼ªé€ ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¸­æ‰€æœ‰çš„ç”¨æˆ·éªŒè¯ä¿¡æ¯éƒ½æ˜¯å­˜åœ¨äº cookie ä¸­ï¼Œå› æ­¤é»‘å®¢å¯ä»¥åœ¨ä¸çŸ¥é“è¿™äº›éªŒè¯ä¿¡æ¯çš„æƒ…å†µä¸‹ç›´æ¥åˆ©ç”¨ç”¨æˆ·è‡ªå·±çš„ cookie æ¥é€šè¿‡å®‰å…¨éªŒè¯ã€‚ 2.2 é‚£æˆ‘ä»¬å°±åŠ ä¸€æŠŠé’¥åŒ™è¦æŠµå¾¡ CSRFï¼Œå…³é”®åœ¨äºåœ¨è¯·æ±‚ä¸­æ”¾å…¥é»‘å®¢æ‰€ä¸èƒ½ä¼ªé€ çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è¯¥ä¿¡æ¯ä¸å­˜åœ¨äº cookie ä¹‹ä¸­ã€‚å¯ä»¥åœ¨ HTTP è¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„ tokenï¼Œå¹¶åœ¨æœåŠ¡å™¨ç«¯å»ºç«‹ä¸€ä¸ªæ‹¦æˆªå™¨æ¥éªŒè¯è¿™ä¸ª tokenï¼Œå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰ token æˆ–è€… token å†…å®¹ä¸æ­£ç¡®ï¼Œåˆ™è®¤ä¸ºå¯èƒ½æ˜¯ CSRF æ”»å‡»è€Œæ‹’ç»è¯¥è¯·æ±‚ã€‚ è¿™ç§æ–¹æ³•è¦æ¯”æ£€æŸ¥ Referer è¦å®‰å…¨ä¸€äº›ï¼Œtoken å¯ä»¥åœ¨ç”¨æˆ·ç™»é™†åäº§ç”Ÿå¹¶æ”¾äº session ä¹‹ä¸­ï¼Œç„¶ååœ¨æ¯æ¬¡è¯·æ±‚æ—¶æŠŠ token ä» session ä¸­æ‹¿å‡ºï¼Œä¸è¯·æ±‚ä¸­çš„ token è¿›è¡Œæ¯”å¯¹ã€‚ ä½†è¿™ç§æ–¹æ³•çš„éš¾ç‚¹åœ¨äºå¦‚ä½•æŠŠ token ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥è¯·æ±‚ã€‚å¯¹äº GET è¯·æ±‚ï¼Œtoken å°†é™„åœ¨è¯·æ±‚åœ°å€ä¹‹åï¼Œè¿™æ · URL å°±å˜æˆ http://url?csrftoken=tokenvalueã€‚ è€Œå¯¹äº POST è¯·æ±‚æ¥è¯´ï¼Œè¦åœ¨ form çš„æœ€ååŠ ä¸Š ï¼Œè¿™æ ·å°±æŠŠ token ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥è¯·æ±‚äº†ã€‚ 2.3 ä½¿ç”¨tokençš„ç¼ºç‚¹ï¼šâ‘ . åœ¨ä¸€ä¸ªç½‘ç«™ä¸­ï¼Œå¯ä»¥æ¥å—è¯·æ±‚çš„åœ°æ–¹éå¸¸å¤šï¼Œè¦å¯¹äºæ¯ä¸€ä¸ªè¯·æ±‚éƒ½åŠ ä¸Š token æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“æ¼æ‰ï¼Œé€šå¸¸ä½¿ç”¨çš„æ–¹æ³•å°±æ˜¯åœ¨æ¯æ¬¡é¡µé¢åŠ è½½æ—¶ï¼Œä½¿ç”¨ javascript éå†æ•´ä¸ª dom æ ‘ï¼Œå¯¹äº dom ä¸­æ‰€æœ‰çš„ a å’Œ form æ ‡ç­¾ååŠ å…¥ tokenã€‚è¿™æ ·å¯ä»¥è§£å†³å¤§éƒ¨åˆ†çš„è¯·æ±‚ï¼Œä½†æ˜¯å¯¹äºåœ¨é¡µé¢åŠ è½½ä¹‹ååŠ¨æ€ç”Ÿæˆçš„ html ä»£ç ï¼Œè¿™ç§æ–¹æ³•å°±æ²¡æœ‰ä½œç”¨ï¼Œè¿˜éœ€è¦ç¨‹åºå‘˜åœ¨ç¼–ç æ—¶æ‰‹åŠ¨æ·»åŠ  tokenã€‚ â‘¡. è¯¥æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯éš¾ä»¥ä¿è¯ token æœ¬èº«çš„å®‰å…¨ã€‚ç‰¹åˆ«æ˜¯åœ¨ä¸€äº›è®ºå›ä¹‹ç±»æ”¯æŒç”¨æˆ·è‡ªå·±å‘è¡¨å†…å®¹çš„ç½‘ç«™ï¼Œé»‘å®¢å¯ä»¥åœ¨ä¸Šé¢å‘å¸ƒè‡ªå·±ä¸ªäººç½‘ç«™çš„åœ°å€ã€‚ç”±äºç³»ç»Ÿä¹Ÿä¼šåœ¨è¿™ä¸ªåœ°å€åé¢åŠ ä¸Š tokenï¼Œé»‘å®¢å¯ä»¥åœ¨è‡ªå·±çš„ç½‘ç«™ä¸Šå¾—åˆ°è¿™ä¸ª tokenï¼Œå¹¶é©¬ä¸Šå°±å¯ä»¥å‘åŠ¨ CSRF æ”»å‡»ã€‚ ä¸ºäº†é¿å…è¿™ä¸€ç‚¹ï¼Œç³»ç»Ÿå¯ä»¥åœ¨æ·»åŠ  token çš„æ—¶å€™å¢åŠ ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœè¿™ä¸ªé“¾æ¥æ˜¯é“¾åˆ°è‡ªå·±æœ¬ç«™çš„ï¼Œå°±åœ¨åé¢æ·»åŠ  tokenï¼Œå¦‚æœæ˜¯é€šå‘å¤–ç½‘åˆ™ä¸åŠ ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿™ä¸ª csrftoken ä¸ä»¥å‚æ•°çš„å½¢å¼é™„åŠ åœ¨è¯·æ±‚ä¹‹ä¸­ï¼Œé»‘å®¢çš„ç½‘ç«™ä¹ŸåŒæ ·å¯ä»¥é€šè¿‡ Referer æ¥å¾—åˆ°è¿™ä¸ª token å€¼ä»¥å‘åŠ¨ CSRF æ”»å‡»ã€‚è¿™ä¹Ÿæ˜¯ä¸€äº›ç”¨æˆ·å–œæ¬¢æ‰‹åŠ¨å…³é—­æµè§ˆå™¨ Referer åŠŸèƒ½çš„åŸå› ã€‚ 3. åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯3.1 æŠŠå¯†é’¥æ”¾åˆ°HTTPè¯·æ±‚å¤´ä¸­è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ä½¿ç”¨ token å¹¶è¿›è¡ŒéªŒè¯ï¼Œå’Œä¸Šä¸€ç§æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå¹¶ä¸æ˜¯æŠŠ token ä»¥å‚æ•°çš„å½¢å¼ç½®äº HTTP è¯·æ±‚ä¹‹ä¸­ï¼Œè€Œæ˜¯æŠŠå®ƒæ”¾åˆ° HTTP å¤´ä¸­è‡ªå®šä¹‰çš„å±æ€§é‡Œã€‚ é€šè¿‡ XMLHttpRequest è¿™ä¸ªç±»ï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç»™æ‰€æœ‰è¯¥ç±»è¯·æ±‚åŠ ä¸Š csrftoken è¿™ä¸ª HTTP å¤´å±æ€§ï¼Œå¹¶æŠŠ token å€¼æ”¾å…¥å…¶ä¸­ã€‚ è¿™æ ·è§£å†³äº†ä¸Šç§æ–¹æ³•åœ¨è¯·æ±‚ä¸­åŠ å…¥ token çš„ä¸ä¾¿ï¼ŒåŒæ—¶ï¼Œé€šè¿‡ XMLHttpRequest è¯·æ±‚çš„åœ°å€ä¸ä¼šè¢«è®°å½•åˆ°æµè§ˆå™¨çš„åœ°å€æ ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒ token ä¼šé€è¿‡ Referer æ³„éœ²åˆ°å…¶ä»–ç½‘ç«™ä¸­å»ã€‚ 3.2 ç¼ºç‚¹ï¼šç„¶è€Œè¿™ç§æ–¹æ³•çš„å±€é™æ€§éå¸¸å¤§ã€‚XMLHttpRequest è¯·æ±‚é€šå¸¸ç”¨äº Ajax æ–¹æ³•ä¸­å¯¹äºé¡µé¢å±€éƒ¨çš„å¼‚æ­¥åˆ·æ–°ï¼Œå¹¶éæ‰€æœ‰çš„è¯·æ±‚éƒ½é€‚åˆç”¨è¿™ä¸ªç±»æ¥å‘èµ·ï¼Œè€Œä¸”é€šè¿‡è¯¥ç±»è¯·æ±‚å¾—åˆ°çš„é¡µé¢ä¸èƒ½è¢«æµè§ˆå™¨æ‰€è®°å½•ä¸‹ï¼Œä»è€Œè¿›è¡Œå‰è¿›ï¼Œåé€€ï¼Œåˆ·æ–°ï¼Œæ”¶è—ç­‰æ“ä½œï¼Œç»™ç”¨æˆ·å¸¦æ¥ä¸ä¾¿ã€‚å¦å¤–ï¼Œå¯¹äºæ²¡æœ‰è¿›è¡Œ CSRF é˜²æŠ¤çš„é—ç•™ç³»ç»Ÿæ¥è¯´ï¼Œè¦é‡‡ç”¨è¿™ç§æ–¹æ³•æ¥è¿›è¡Œé˜²æŠ¤ï¼Œè¦æŠŠæ‰€æœ‰è¯·æ±‚éƒ½æ”¹ä¸º XMLHttpRequest è¯·æ±‚ï¼Œè¿™æ ·å‡ ä¹æ˜¯è¦é‡å†™æ•´ä¸ªç½‘ç«™ï¼Œè¿™ä»£ä»·æ— ç–‘æ˜¯ä¸èƒ½æ¥å—çš„ã€‚ ä¸‰ã€ä»£ç å®ä¾‹(java)ï¼š1. ä½¿ç”¨FilteréªŒè¯Referer12345678//ä»HTTPå¤´éƒ¨å–å¾—Refererå€¼ String referer = request.getHeader("Referer"); //åˆ¤æ–­Refereræ˜¯å¦ä»¥bank.exampleå¼€å¤´ if((refirer != null) &amp;&amp; (referer.trim().startsWith("bank.example")))&#123; vhain.doFilter(request, response); &#125;else&#123;request.getRequestDispatcher("error.jsp").forward(request,response);&#125; ä»¥ä¸Šä»£ç å…ˆå–å¾—Refererå€¼ï¼Œç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œå½“å…¶éç©ºå¹¶ä»¥bank.exampleå¼€å¤´æ—¶ï¼Œåˆ™ç»§ç»­è¯·æ±‚ï¼Œå¦åˆ™çš„è¯å¯èƒ½æ˜¯CSRFæ”»å‡»ï¼Œè½¬åˆ°error.jspé¡µé¢ã€‚ 2.è¿›ä¸€æ­¥éªŒè¯è¯·æ±‚ä¸­çš„token1234567891011121314151617181920HttpServletRequest req = (HttpServletRequest)request;HttpSession s = req.getSession();//ä»sessionä¸­ï¼Œå¾—åˆ°csrftokenå±æ€§String sToken = (String)s.getAttribute("csrftoken");if(sToken == null)&#123; //äº§ç”Ÿæ–°çš„tokenæ”¾å…¥sessionä¸­ sToken = generateToken(); s.setAttribute("csrftoken", sToken); chain.doFilter(request, response);&#125;else&#123; //ä»HTTPå¤´ä¸­å–å¾—csrftoken String xhrToken = req.getHeader("csrftoken"); //ä»è¯·æ±‚å‚æ•°ä¸­å–å¾—csrftoken String pToken = req.getParameter("csrftoken"); if(sToken != null &amp;&amp; xhrToken != null &amp;&amp; sToken.equals(xhrToken))&#123; chain.doFilter(request, response); &#125;else&#123; request.getRequestDispatcher("error.jsp").forward(request,response); &#125;&#125; 3.åœ¨å®¢æˆ·ç«¯å¯¹è¯·æ±‚é™„åŠ token1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859function appendTOken()&#123; updateForms(); updateTags();&#125;function updateForms()&#123; //è·å–æ‰€æœ‰formå…ƒç´  var forms = document.getElementsByTagName('form'); for (i = 0; i &lt; forms.length; i++)&#123; var url = forms[i].action; //å¦‚æœè¿™ä¸ªformçš„actionå€¼ä¸ºç©ºï¼Œåˆ™ä¸é™„åŠ csrftoken if(url == null || url == "") continue; //åŠ¨æ€ç”Ÿæˆinputå…ƒç´ ï¼ŒåŠ åˆ° form ä¹‹å var e = docement.createElement("input"); e.name = "csrftoken"; e.value = token; e.type = "hidden"; forms[i].appendChild(e); &#125;&#125;function updateTags()&#123; var all = document.getElementsByTagName('a'); var len = all.length; //éå†æ‰€æœ‰aå…ƒç´  for(var i = 0; i&lt; len; i++)&#123; var e = all[i]; updateTag(e, "href" , token); &#125;&#125;function updateTag(element, attr, token)&#123; var location = element.getAttribute(attr); if(location != null &amp;&amp; location != '' '')&#123; var fragmentIndex = location.indexOf("#"); var fragment = null; if(fragmentIndex != -1)&#123; //urlä¸­å«æœ‰#é”šæ ‡è®° fragment = location.substring(fragmentIndex); location = location.substring(0, fragmentIndex); &#125; var index = location.indexOf('?'); if(index !== -1)&#123; //urlä¸­å·²å«æœ‰å…¶ä»–å‚æ•° location = location + '&amp;csrftoken=' + token; &#125;else&#123; //urlä¸­æ²¡æœ‰å…¶ä»–å‚æ•° location = location + '?csrftoken=' + token; &#125; if(fragment != null)&#123; location += fragment; &#125; element.setAttribute(attr, location); &#125;&#125; åœ¨å®¢æˆ·ç«¯htmlä¸­ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦åŠ ä¸Štokenï¼Œä¸€ä¸ªæ˜¯è¡¨å•formï¼Œå¦ä¸€ä¸ªå°±æ˜¯aæ ‡ç­¾ã€‚ä¸Šé¢è¿™æ®µä»£ç ï¼Œé¦–å…ˆéå†æ‰€æœ‰çš„form, åœ¨formæœ€åæ·»åŠ ä¸€æ®µéšè—å­—æ®µï¼ŒæŠŠcsrftokenæ”¾å…¥å…¶ä¸­ã€‚ç„¶åï¼Œä»£ç éå†æ‰€æœ‰çš„aæ ‡ç­¾ï¼Œåœ¨å…¶hrefå±æ€§ä¸­åŠ å…¥csrftokenå‚æ•°ã€‚ æ³¨æ„å¯¹äº a.href æ¥è¯´ï¼Œå¯èƒ½è¯¥å±æ€§å·²ç»æœ‰å‚æ•°ï¼Œæˆ–è€…æœ‰é”šæ ‡è®°ã€‚å› æ­¤éœ€è¦åˆ†æƒ…å†µè®¨è®ºï¼Œä»¥ä¸åŒçš„æ ¼å¼æŠŠ csrftoken åŠ å…¥å…¶ä¸­ã€‚ 4. åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§var plainXhr = dojo.xhr; // é‡å†™ dojo.xhr æ–¹æ³• dojo.xhr = function(method,args,hasBody) { // ç¡®ä¿ header å¯¹è±¡å­˜åœ¨ args.headers = args.header || {}; tokenValue = &apos;&lt;%=request.getSession(false).getAttribute(&quot;csrftoken&quot;)%&gt;&apos;; var token = dojo.getObject(&quot;tokenValue&quot;); // æŠŠ csrftoken å±æ€§æ”¾åˆ°å¤´ä¸­ args.headers[&quot;csrftoken&quot;] = (token) ? token : &quot; &quot;; return plainXhr(method,args,hasBody); }; è¿™é‡Œæ”¹å†™äº† dojo.xhr çš„æ–¹æ³•ï¼Œé¦–å…ˆç¡®ä¿ dojo.xhr ä¸­å­˜åœ¨ HTTP å¤´ï¼Œç„¶ååœ¨ args.headers ä¸­æ·»åŠ  csrftoken å­—æ®µï¼Œå¹¶æŠŠ token å€¼ä» session é‡Œæ‹¿å‡ºæ”¾å…¥å­—æ®µä¸­ã€‚ å››ã€å¦‚ä½•é€‰æ‹©CSRFé˜²å¾¡æ–¹æ³•ï¼Ÿç›®å‰ä¸šç•Œåº”å¯¹ CSRF æ”»å‡»æœ‰ä¸€äº›å…‹åˆ¶æ–¹æ³•ï¼Œä½†æ˜¯æ¯ç§æ–¹æ³•éƒ½æœ‰åˆ©å¼Šï¼Œæ²¡æœ‰ä¸€ç§æ–¹æ³•æ˜¯å®Œç¾çš„ã€‚å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ–¹æ³•éå¸¸é‡è¦ã€‚ å¦‚æœç½‘ç«™æ˜¯ä¸€ä¸ªç°æœ‰ç³»ç»Ÿï¼Œæƒ³è¦åœ¨æœ€çŸ­æ—¶é—´å†…è·å¾—ä¸€å®šç¨‹åº¦çš„ CSRF çš„ä¿æŠ¤ï¼Œé‚£ä¹ˆéªŒè¯ Referer çš„æ–¹æ³•æ˜¯æœ€æ–¹ä¾¿çš„ï¼Œè¦æƒ³å¢åŠ å®‰å…¨æ€§çš„è¯ï¼Œå¯ä»¥é€‰æ‹©ä¸æ”¯æŒä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œæ¯•ç«Ÿå°±ç›®å‰æ¥è¯´ï¼ŒIE7+, FF3+ è¿™ç±»é«˜ç‰ˆæœ¬æµè§ˆå™¨çš„ Referer å€¼è¿˜æ— æ³•è¢«ç¯¡æ”¹ã€‚ å¦‚æœç³»ç»Ÿå¿…é¡»æ”¯æŒ IE6ï¼Œå¹¶ä¸”ä»ç„¶éœ€è¦é«˜å®‰å…¨æ€§ã€‚é‚£ä¹ˆå°±è¦ä½¿ç”¨ token æ¥è¿›è¡ŒéªŒè¯ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½¿ç”¨ XmlHttpRequest å¹¶ä¸åˆé€‚ï¼Œtoken åªèƒ½ä»¥å‚æ•°çš„å½¢å¼æ”¾äºè¯·æ±‚ä¹‹ä¸­ï¼Œè‹¥ä½ çš„ç³»ç»Ÿä¸æ”¯æŒç”¨æˆ·è‡ªå·±å‘å¸ƒä¿¡æ¯ï¼Œé‚£è¿™ç§ç¨‹åº¦çš„é˜²æŠ¤å·²ç»è¶³å¤Ÿï¼Œå¦åˆ™çš„è¯ï¼Œä½ ä»ç„¶éš¾ä»¥é˜²èŒƒ token è¢«é»‘å®¢çªƒå–å¹¶å‘åŠ¨æ”»å‡»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦å°å¿ƒè§„åˆ’ä½ ç½‘ç«™æä¾›çš„å„ç§æœåŠ¡ï¼Œä»ä¸­é—´æ‰¾å‡ºé‚£äº›å…è®¸ç”¨æˆ·è‡ªå·±å‘å¸ƒä¿¡æ¯çš„éƒ¨åˆ†ï¼ŒæŠŠå®ƒä»¬ä¸å…¶ä»–æœåŠ¡åˆ†å¼€ï¼Œä½¿ç”¨ä¸åŒçš„ token è¿›è¡Œä¿æŠ¤ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆæŠµå¾¡é»‘å®¢å¯¹äºä½ å…³é”®æœåŠ¡çš„æ”»å‡»ï¼ŒæŠŠå±å®³é™åˆ°æœ€ä½ã€‚æ¯•ç«Ÿï¼Œåˆ é™¤åˆ«äººä¸€ä¸ªå¸–å­æ¯”ç›´æ¥ä»åˆ«äººè´¦å·ä¸­è½¬èµ°å¤§ç¬”å­˜æ¬¾ä¸¥é‡ç¨‹åº¦è¦è½»çš„å¤šã€‚ å¦‚æœæ˜¯å¼€å‘ä¸€ä¸ªå…¨æ–°çš„ç³»ç»Ÿï¼Œåˆ™æŠµå¾¡ CSRF çš„é€‰æ‹©è¦å¤§å¾—å¤šã€‚ç¬”è€…å»ºè®®å¯¹äºé‡è¦çš„æœåŠ¡ï¼Œå¯ä»¥å°½é‡ä½¿ç”¨ XMLHttpRequest æ¥è®¿é—®ï¼Œè¿™æ ·å¢åŠ  token è¦å®¹æ˜“å¾ˆå¤šã€‚å¦å¤–å°½é‡é¿å…åœ¨ js ä»£ç ä¸­ä½¿ç”¨å¤æ‚é€»è¾‘æ¥æ„é€ å¸¸è§„çš„åŒæ­¥è¯·æ±‚æ¥è®¿é—®éœ€è¦ CSRF ä¿æŠ¤çš„èµ„æºï¼Œæ¯”å¦‚ window.location å’Œ document.createElement(â€œaâ€) ä¹‹ç±»ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å‡å°‘åœ¨é™„åŠ  token æ—¶äº§ç”Ÿçš„ä¸å¿…è¦çš„éº»çƒ¦ã€‚ æœ€åï¼Œè¦è®°ä½ CSRF ä¸æ˜¯é»‘å®¢å”¯ä¸€çš„æ”»å‡»æ‰‹æ®µï¼Œæ— è®ºä½  CSRF é˜²èŒƒæœ‰å¤šä¹ˆä¸¥å¯†ï¼Œå¦‚æœä½ ç³»ç»Ÿæœ‰å…¶ä»–å®‰å…¨æ¼æ´ï¼Œæ¯”å¦‚è·¨ç«™åŸŸè„šæœ¬æ”»å‡» XSSï¼Œé‚£ä¹ˆé»‘å®¢å°±å¯ä»¥ç»•è¿‡ä½ çš„å®‰å…¨é˜²æŠ¤ï¼Œå±•å¼€åŒ…æ‹¬ CSRF åœ¨å†…çš„å„ç§æ”»å‡»ï¼Œä½ çš„é˜²çº¿å°†å¦‚åŒè™šè®¾ã€‚ äº”ã€æ€»ç»“å¯è§ï¼ŒCSRF æ˜¯ä¸€ç§å±å®³éå¸¸å¤§çš„æ”»å‡»ï¼Œåˆå¾ˆéš¾ä»¥é˜²èŒƒã€‚ç›®å‰å‡ ç§é˜²å¾¡ç­–ç•¥è™½ç„¶å¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸ŠæŠµå¾¡ CSRF çš„æ”»å‡»ï¼Œä½†å¹¶æ²¡æœ‰ä¸€ç§å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚ä¸€äº›æ–°çš„æ–¹æ¡ˆæ­£åœ¨ç ”ç©¶ä¹‹ä¸­ï¼Œæ¯”å¦‚å¯¹äºæ¯æ¬¡è¯·æ±‚éƒ½ä½¿ç”¨ä¸åŒçš„åŠ¨æ€å£ä»¤ï¼ŒæŠŠ Referer å’Œ token æ–¹æ¡ˆç»“åˆèµ·æ¥ï¼Œç”šè‡³å°è¯•ä¿®æ”¹ HTTP è§„èŒƒï¼Œä½†æ˜¯è¿™äº›æ–°çš„æ–¹æ¡ˆå°šä¸æˆç†Ÿï¼Œè¦æ­£å¼æŠ•å…¥ä½¿ç”¨å¹¶è¢«ä¸šç•Œå¹¿ä¸ºæ¥å—è¿˜éœ€æ—¶æ—¥ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬åªæœ‰å……åˆ†é‡è§† CSRFï¼Œæ ¹æ®ç³»ç»Ÿçš„å®é™…æƒ…å†µé€‰æ‹©æœ€åˆé€‚çš„ç­–ç•¥ï¼Œè¿™æ ·æ‰èƒ½æŠŠ CSRF çš„å±å®³é™åˆ°æœ€ä½ã€‚ å‚è€ƒé“¾æ¥ï¼šIBMçš„æŠ€æœ¯åšå®¢]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>å®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå¯¹è±¡æ•°ç»„æ’åº]]></title>
    <url>%2F2017%2F05%2F07%2F2017-05-07%20JavaScript%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E6%8E%92%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[å¯¹è±¡æ•°ç»„æ’åº ä¸€ã€æŒ‰ç…§å¯¹è±¡çš„å±æ€§æ’åºæˆ‘è¦ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥è¦å¯¹æ¯”çš„keyï¼Œå°±èƒ½ä»¥è¿™ä¸ªkeyï¼ŒæŠŠå¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºã€‚123456789101112131415161718192021222324252627282930313233//ç¤ºä¾‹ä»£ç var by = function(key) &#123; return function(o, p) &#123; var a, b; if (typeof o === 'object' &amp;&amp; typeof p === 'object' &amp;&amp; o &amp;&amp; p) &#123; a = o[key]; b = p[key]; if (a === b) &#123; return 0; &#125; if (typeof a === typeof b) &#123; return a &lt; b ? -1 : 1; &#125; //å¦‚æœa,bæ‰€å±ç±»å‹ä¸åŒï¼Œåˆ™æŒ‰ç±»å‹çš„è‹±æ–‡å­—ç¬¦æ’åºï¼Œæ¯”å¦‚'function'æ’åœ¨'object'å‰é¢ã€‚ return typeof a &lt; typeof b ? -1 : 1; &#125; else &#123; throw('error'); &#125; &#125;&#125;var employees=[]employees[0]=&#123;name:"George", age:32, retiredate:"March 12, 2014"&#125;employees[1]=&#123;name:"Edward", age:17, retiredate:"June 2, 2023"&#125;employees[2]=&#123;name:"Christine", age:58, retiredate:"December 20, 2036"&#125;employees[3]=&#123;name:"Sarah", age:62, retiredate:"April 30, 2020"&#125;employees.sort(by('age'));//å¾—åˆ°æ ¹æ®ageå±æ€§æ’åºçš„æ•°ç»„ã€‚//[&#123;name:"Edward", age:17, retiredate:"June 2, 2023"&#125;,//&#123;name:"George", age:32, retiredate:"March 12, 2014"&#125;,//&#123;name:"Christine", age:58, retiredate:"December 20, 2036"&#125;,//&#123;name:"Sarah", age:62, retiredate:"April 30, 2020"&#125;] äºŒã€é«˜çº§by()å‡½æ•°å½“ä¸»è¦çš„é”®å€¼äº§ç”Ÿä¸€ä¸ªåŒ¹é…çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªcompareæ–¹æ³•ï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰å°†è¢«è°ƒç”¨ä»¥å†³å‡ºé«˜ä¸‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„ageå±æ€§æ—¶ï¼Œageçš„å€¼ç›¸ç­‰ï¼Œç°åœ¨æˆ‘æƒ³è¦ageç›¸ç­‰çš„äººï¼ŒæŒ‰ç…§åˆ«çš„å±æ€§è¿›è¡Œæ’åºã€‚äºæ˜¯æˆ‘æƒ³å¢å¼ºby() ï¼Œç°åœ¨æˆ‘è¿™æ ·ä½¿ç”¨ï¼š 12//æ³¨æ„å¤–å±‚byå‡½æ•°å†…æœ‰ä¿©ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯å¤‡ç”¨çš„æ¯”è¾ƒå‡½æ•°ã€‚employees.sort(by(&apos;age&apos;,by(&apos;name&apos;))); 12345678910111213141516171819var by = function(name,minor)&#123; return function(o,p)&#123; var a,b; if(o &amp;&amp; p &amp;&amp; typeof o === &apos;object&apos; &amp;&amp; typeof p ===&apos;object&apos;)&#123; a = o[name]; b = p[name]; if(a === b)&#123; //å¦‚æœå‰åå…ƒç´ ç›¸åŒæ—¶ï¼Œç”¨minorå‡½æ•°æ¯”è¾ƒã€‚ return typeof minor === &apos;function&apos; ? minor(o,p):0; &#125; if(typeof a === typeof b)&#123; return a &lt;b ? -1 : 1; &#125; return typeof a &lt; typeof b ? -1 : 1; &#125;else&#123; throw(&quot;error&quot;); &#125; &#125;&#125;]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript è§‚å¯Ÿè€…æ¨¡å¼çš„é€šç”¨å®ç°]]></title>
    <url>%2F2017%2F05%2F07%2F2017-05-07%20JavaScript%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E9%80%9A%E7%94%A8%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯åˆ—ä¸¾ä»£ç ï¼Œå…³äºä¸€ä¸ªç»å…¸çš„è®¾è®¡æ¨¡å¼â€”â€”è§‚å¯Ÿè€…æ¨¡å¼ï¼Œåˆåå‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„é€šç”¨å®ç°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637//å°è£…è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ”¾è¿›ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¯å¤ç”¨ã€‚var event = &#123; clientList:[], //è®¢é˜…çš„æ¶ˆæ¯æ·»åŠ è¿›ç¼“å­˜åˆ—è¡¨ listen: function(key, fn)&#123; if( !this.clientList[key])&#123; this.clientList[key] = []; &#125; this.clientList[key].push(fn); &#125;, trigger: function()&#123; var key = Array.prototype.shift.call(arguments), fns = this.clientList[key]; if(!fns || fns.length === 0)&#123; return false; &#125; for(var i = 0, fn; fn = fns[i++];)&#123; fn.apply(this, arguments); &#125; &#125;ï¼Œ remove: function(key, fn)&#123; var fns = ClientList[key]; if( !fns )&#123; return false; &#125; if(!fn)&#123; fns &amp;&amp; fns.length = 0; &#125;else&#123; for(var len = fns.length-1; len&gt;=0; len--)&#123; var _fn = fns[len&#125;; if(_fn === fn)&#123; fns.splice(len, 1); &#125; &#125; &#125; &#125;&#125; 123456//æ‰€æœ‰å¯¹è±¡éƒ½èƒ½åŠ¨æ€å®‰è£… â€˜è§‚å¯Ÿè€…æ¨¡å¼â€™var installEvent = function(obj)&#123; for (var i in event)&#123; obj[i] = event[i]; &#125;&#125;; 12345678910111213//æµ‹è¯•var salesOffices = &#123;&#125;;installEvent(salesOffices); //è®¢é˜…salesOffices.listen(&apos;squareMeter88&apos;, function(price)&#123; console.log(&apos;88å¹³æ–¹ç±³çš„ä»·æ ¼=&apos;+price);&#125;);salesOffices.listen(&apos;squareMeter110&apos;,function(price)&#123; console.log(&apos;110å¹³æ–¹ç±³çš„ä»·æ ¼=&apos;+price);&#125;); //å‘å¸ƒsalesOffices.trigger(&apos;squareMeter88&apos;,2000000); //è¾“å‡ºï¼š&quot;88å¹³æ–¹ç±³çš„ä»·æ ¼=2000000&quot;salesOffices.trigger(&apos;squareMeter110&apos;,3000000); //è¾“å‡ºï¼š&quot;110å¹³æ–¹ç±³çš„ä»·æ ¼=3000000&quot;]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptç²¾é«“(2)]]></title>
    <url>%2F2017%2F03%2F07%2F2017-03-07%20JavaScript%E7%B2%BE%E9%AB%93(2)%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡åšå®¢å»¶ç»­ä¸Šä¸€ç¯‡JavaScriptç²¾é«“(1)ï¼Œç»§ç»­æ€»ç»“JavaScriptè¯­è¨€çš„æ ¸å¿ƒç‰¹æ€§å’Œæ€æƒ³ç²¾é«“ã€‚ 1. JavaScriptç»§æ‰¿çš„å®ç°æ–¹å¼ æ„é€ ç»§æ‰¿ åŸå‹ç»§æ‰¿ å®ä¾‹ç»§æ‰¿ æ‹·è´ç»§æ‰¿ åŸå‹prototypeæœºåˆ¶æˆ–è€…apply/callæ–¹æ³•è¾ƒç®€å•ï¼Œå»ºè®®ä½¿ç”¨æ„é€ å‡½æ•°ä¸åŸå‹æ··åˆæ–¹å¼ã€‚ 1234567891011function Parent()&#123; this.name = 'wang';&#125;function Child()&#123; this.age = 28;&#125;Child.prototype = new Parent(); //é€šè¿‡prototypeï¼Œç»§æ‰¿Parent var demo = new Child();alert(demo.age);alert(demo.name); //å¾—åˆ°ç»§æ‰¿çš„å±æ€§ 2. DOMæ“ä½œâ€”â€”æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ åˆ›å»ºæ–°èŠ‚ç‚¹ createDocumentFragment() createElement() createTextNode() æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥ appendChild() removeChild() replaceChild() insertBefore() æŸ¥æ‰¾ getElementsByTagName() getElementsByName() getElementById() 3. Ajaxçš„æ¦‚å¿µå’Œç”¨æ³• AJAXçš„å…¨ç§°ï¼š Asynchronous JavaScript And XML. å¼‚æ­¥çš„æ¦‚å¿µï¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¸å¿…ç­‰å¾…ç»“æœï¼Œè€Œå¯ä»¥åŒæ—¶åšå…¶ä»–äº‹æƒ…ã€‚ Ajaxç”¨æ³•ï¼š åˆ›å»ºXMLHttpRequestå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡ï¼Œ åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚ï¼Œå¹¶æŒ‡å®šè¯¥HTTPè¯·æ±‚çš„æ–¹æ³•ã€URLå’ŒéªŒè¯ä¿¡æ¯ï¼Œ è®¾ç½®å“åº”HTTPè¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•°ï¼Œ å‘é€HTTPè¯·æ±‚ï¼Œ è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ®ï¼Œ ä½¿ç”¨JavaScriptå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–° ã€‚ 4. document.write å’Œ innerHTMLçš„åŒºåˆ« document.writeåªèƒ½é‡ç»˜æ•´ä¸ªé¡µé¢ innerHTMLå¯ä»¥åªé‡ç»˜é¡µé¢çš„ä¸€éƒ¨åˆ† 5. windowå¯¹è±¡å’Œdocumentå¯¹è±¡ windowå¯¹è±¡ï¼šæŒ‡çš„æ˜¯æµè§ˆå™¨æ‰“å¼€çš„çª—å£ documentå¯¹è±¡ï¼šDocumentå¯¹è±¡çš„ä¸€ä¸ªåªè¯»å¼•ç”¨ï¼Œå®ƒæ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚ 6. é€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081//eventå·¥å…·é›†ï¼Œå‚è€ƒæ¥æºï¼šgithub.com/markyunmarkyun.Event = &#123; readyEvent : function(fn)&#123; if(fn==null)&#123; fn = document; &#125; var oldonload = window.onload; if(typeof window.onload != 'function')&#123; window.onload = fn; &#125;else&#123; window.onload = function()&#123; oldonolad(): fn(); &#125; &#125; &#125;, //æ ¹æ®èƒ½åŠ›åˆ†åˆ«ä½¿ç”¨DOM 0çº§ || DOM 2çº§ || IEæ–¹å¼ï¼Œæ¥ç»‘å®šäº‹ä»¶ //å‚æ•°ï¼šæ“ä½œå…ƒç´ ï¼Œäº‹ä»¶åç§°ï¼Œäº‹ä»¶å¤„ç†å‡½æ•° addEvent: function(element, type, handler)&#123; if(element.addEventListener)&#123; //äº‹ä»¶ç±»å‹ï¼Œéœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œæ˜¯å¦æ•æ‰ element.addEventListener(type, handler, false); &#125;else if(element.attachEvent)&#123; element.attachEvent('on' + type, function()&#123; handler.call(element); &#125;); &#125;else&#123; element['on' + type ] = handler; &#125; &#125;, //ç§»é™¤äº‹ä»¶ removeEvent: function(element,type,handler)&#123; if(element.removeEventListener)&#123; element.removeEventListener(type,handler,false); &#125;else if(element.detachEvent)&#123; element.detachEvent('on' + type, handler); &#125;else &#123; element['on' + type] = null; &#125; &#125;, //End removeEvent //é˜»æ­¢äº‹ä»¶(ä¸»è¦æ˜¯äº‹ä»¶å†’æ³¡ï¼Œ å› ä¸ºIEä¸æ”¯æŒäº‹ä»¶æ•è·) stopPropagation: function(ev)&#123; if(ev.stopPropagation)&#123; ev.stopPropagation(); &#125;else&#123; ev.cancelBubble = true; &#125; &#125;, //å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º preventDefault : function(event)&#123; if(event.preventDefault)&#123; event.preventDefault(); &#125;else&#123; event.returnValue = false; &#125;, //è·å–äº‹ä»¶ç›®æ ‡ getTarget: function(event)&#123; return event.target || event.srcElement; &#125;, //è·å–eventå¯¹è±¡çš„å¼•ç”¨ï¼Œå–åˆ°äº‹ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç¡®ä¿éšæ—¶èƒ½ä½¿ç”¨eventï¼› getEvent: function(e)&#123; var ev = e || window.event; if(!ev)&#123; var c = this.getEvent.caller; while(c)&#123; ev = c.arguments[0]; if(ev &amp;&amp; Event == ev.constructor)&#123; break; &#125; c = c.caller; &#125; &#125; return ev; &#125; &#125; //End]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptç²¾é«“(1)]]></title>
    <url>%2F2017%2F03%2F06%2F2017-03-06%20JavaScript%E7%B2%BE%E9%AB%93(1)%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« ä¸»è¦æ€»ç»“äº†JavaScriptçš„åŸºç¡€ï¼ŒåŒ…æ‹¬æ•°æ®ç±»å‹ï¼Œå€¼å’Œæ˜“æ··æ·†çš„æ¦‚å¿µã€‚ 1. JavaScriptçš„åŸºæœ¬æ•°æ®ç±»å‹ Undefined Null Number Boolean String Symbol(ES2015æ–°å¢) 2. JavaScriptçš„å†…ç½®å¯¹è±¡ Object æ˜¯JSä¸­æ‰€æœ‰å¯¹è±¡çš„çˆ¶å¯¹è±¡ æ•°æ®å°è£…ç±»å¯¹è±¡ï¼š Object Array Boolean Number String å…¶ä»–å¯¹è±¡ï¼š Function Arguments Math Date RegExp Error å‚è€ƒæ–‡æ¡£ï¼šæ–‡æ¡£é“¾æ¥ 3. JavaScript ä¸­æœ‰å‡ ç§ç±»å‹çš„å€¼ï¼Ÿ æ ˆ(Stack)ï¼šåŸå§‹(primitive)æ•°æ®ç±»å‹(Undefined, Null , Boolean, Number, String) å †(Heap)ï¼šåˆæˆ(complex)æ•°æ®ç±»å‹(Object, Array, Function) ä¸¤ç§ç±»å‹çš„åŒºåˆ«æ˜¯ï¼š å­˜å‚¨ä½ç½®ä¸åŒ åŸå§‹æ•°æ®ç±»å‹ï¼šç›´æ¥å­˜å‚¨åœ¨æ ˆä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ï¼Œå¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥æ”¾å…¥æ ˆä¸­å­˜å‚¨ï¼› å¼•ç”¨æ•°æ®ç±»å‹ï¼šå­˜å‚¨åœ¨å †(Heap)ä¸­çš„å¯¹è±¡ï¼Œå æ®ç©ºé—´å¤§ï¼Œå¤§å°ä¸å›ºå®šã€‚å¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œåˆ™ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½ã€‚ å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åï¼Œä»å †ä¸­è·å¾—å®ä½“ã€‚ å†…å­˜å›¾ï¼š 4. nullå’Œundefinedçš„åŒºåˆ« null è¡¨ç¤ºâ€æ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ï¼Œå…¸å‹ç”¨æ³•ï¼š ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡ã€‚ ä½œä¸ºå¯¹è±¡åŸå‹é“¾çš„ç»ˆç‚¹ã€‚ 12Object.getPrototypeOf(Object.prototype)//null undefined è¡¨ç¤ºâ€œç¼ºå°‘å€¼â€ï¼Œå³æ­¤å¤„åº”è¯¥æœ‰å€¼ï¼Œä½†æ˜¯æ²¡æœ‰è¢«èµ‹å€¼ï¼Œå…¸å‹ç”¨æ³•ï¼š å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ˜¯æ²¡æœ‰èµ‹å€¼ï¼Œé»˜è®¤ç­‰äºundefinedã€‚ è°ƒç”¨å‡½æ•°æ—¶ï¼Œåº”è¯¥æä¾›çš„å‚æ•°æ²¡æœ‰æä¾›ï¼Œè¯¥å‚æ•°ç­‰äºundefinedã€‚ å¯¹è±¡æ²¡æœ‰èµ‹å€¼çš„å±æ€§ï¼Œè¯¥å±æ€§é»˜è®¤å€¼ä¸ºundefinedã€‚ å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å›undefinedã€‚1234567891011var i;i //undefinedfunction f(x)&#123;console.log(x)&#125;f() //undefinedvar o = new Object();o.p //undefinedvar x = f();x //undefinde 123456//äºŒè€…çš„æµ‹è¯•typeof undefined == "undefined" //truetypeof null == "object" //trueNumber(undefined) //NaNNumber(null) //0 æ³¨æ„ï¼š åœ¨éªŒè¯nullæ—¶ï¼Œä¸€å®šè¦ä½¿ç”¨ ===,å› ä¸º == æ— æ³•åˆ†è¾¨nullå’Œundefinedï¼š 12null == undefined //truenull === undefined //false æ‰“ä¸ªæ¯”æ–¹ï¼š null Q: æœ‰å¼ ä¸‰è¿™ä¸ªäººå—ï¼Ÿ A: æœ‰ï¼ Q: å¼ ä¸‰æœ‰æˆ¿å­å—ï¼Ÿ A: æ²¡æœ‰ï¼ undefined Q: æœ‰å¼ ä¸‰è¿™ä¸ªäººå—ï¼Ÿ A: æœ‰ï¼ Q: å¼ ä¸‰å¤šå°‘å²äº†ï¼Ÿ A: ä¸çŸ¥é“ï¼ˆæ²¡æœ‰è¢«å‘Šè¯‰ï¼‰ 5. JavaScriptçš„this thisæ˜¯ä¸€ä¸ªæŒ‡é’ˆ thisçš„æŒ‡å‘ï¼š å‡½æ•°ç›´æ¥è°ƒç”¨æ—¶ï¼šthisæŒ‡å‘å‡½æ•°çš„ç›´æ¥è°ƒç”¨è€…ï¼› é€šè¿‡newå…³é”®å­—ï¼ŒthisæŒ‡å‘newäº§ç”Ÿçš„æ–°å¯¹è±¡ï¼› é€šè¿‡call/apply/bindçš„ç»‘å®šï¼ŒthisæŒ‡å‘ç»‘å®šå¯¹è±¡ã€‚ åœ¨JSäº‹ä»¶ä¸­ï¼ŒthisæŒ‡å‘è§¦å‘è¿™ä¸ªäº‹ä»¶çš„å¯¹è±¡ï¼Œä½†æ˜¯åœ¨IEä¸­ï¼ŒattachEventä¸­çš„thisæ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡Windowã€‚ 6.JavaScriptçš„ä½œç”¨åŸŸé“¾å…¨å±€å‡½æ•°æ— æ³•æŸ¥çœ‹å±€éƒ¨å‡½æ•°çš„å†…éƒ¨ç»†èŠ‚ï¼Œä½†å±€éƒ¨å‡½æ•°åˆ»æ„æŸ¥çœ‹ä¸Šå±‚å‡½æ•°çš„ç»†èŠ‚ï¼Œç›´è‡³å…¨å±€ç»†èŠ‚ã€‚ å½“éœ€è¦ä»å±€éƒ¨å‡½æ•°æŸ¥æ‰¾æŸä¸€å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœå½“å‰ä½œç”¨åŸŸæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä¸Šæº¯åˆ°ä¸Šå±‚ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´è‡³å…¨å±€å‡½æ•°ï¼Œè¿™ç§ç»„ç»‡å½¢å¼å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚ 7. JavaScriptåŸå‹å’ŒåŸå‹é“¾ åŸå‹ï¼šæ¯ä¸ªå¯¹è±¡éƒ½ä¼šåœ¨å…¶å†…éƒ¨åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯prototype(åŸå‹)ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ä»¥å¯¹è±¡ä¸ºæ¨¡æ¿åˆ›å»ºå®ä¾‹çš„ã€‚ åŸå‹é“¾ï¼šå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§Aæ—¶ï¼Œå¦‚æœå±æ€§Aä¸å­˜åœ¨äºè¯¥å¯¹è±¡ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå»prototypeé‡ŒæŸ¥æ‰¾Aï¼Œè€Œè¿™ä¸ªprototypeåˆä¼šæœ‰è‡ªå·±çš„prototypeï¼Œäºæ˜¯å°±å¦‚æ­¤æŸ¥æ‰¾ä¸‹å»ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªåŸå‹é“¾ã€‚è¿™ä¸ªåŸå‹é“¾è¡¨ç¤ºçš„æ˜¯ä¸€ç§è¿å¸¦å…³ç³»ã€‚ å…³ç³»ï¼šinstance.constructor.prototype = instance.__proto__ ç‰¹ç‚¹ï¼šJSå¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨ä¼ é€’çš„ï¼ˆå¯¹æ¯”äºå€¼ä¼ é€’ï¼‰ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸€ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹äº†åŸå‹ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™äº›å˜åŒ–ã€‚ ç»ˆç‚¹ï¼šåŸå‹é“¾çš„é¡¶ç«¯ï¼Œæ˜¯Object.prototype, å®ƒçš„__proto__æŒ‡å‘null. 8.JavaScriptçš„é—­åŒ… æ¦‚å¿µé—­åŒ…æ˜¯ä¸€ç§æ‰‹æ®µï¼Œä¸€ä¸ªæœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼Œè®°ä½é—­åŒ…ä¹Ÿæ˜¯å‡½æ•°ã€‚ åˆ›å»ºé—­åŒ…æœ€å¸¸è§çš„æ–¹å¼ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å¦ä¸€ä¸ªå‡½æ•°è®¿é—®è¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡(ç›¸å½“äºä¸€ä¸ªå¯¹å¤–çš„æ¥å£)ã€‚ ä½œç”¨åˆ©ç”¨é—­åŒ…å¯ä»¥çªç ´ä½œç”¨åŸŸé“¾ï¼Œå°†å‡½æ•°å†…éƒ¨çš„å˜é‡æ–¹æ³•ä¼ é€’åˆ°å¤–éƒ¨ã€‚ ç‰¹æ€§ 1. å‡½æ•°å†…å†åµŒå¥—å‡½æ•° 2. å†…éƒ¨å‡½æ•°å¯ä»¥å¼•ç”¨å¤–å±‚çš„å‚æ•°å’Œå˜é‡ 3. å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ 9. newæ“ä½œç¬¦åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°†thisæŒ‡é’ˆæŒ‡å‘è¯¥å¯¹è±¡ï¼ŒåŒæ—¶ç»§æ‰¿è¯¥å‡½æ•°çš„åŸå‹ã€‚ å±æ€§å’Œæ–¹æ³•è¢«æ·»åŠ åˆ°thisæŒ‡å‘çš„å¯¹è±¡ä¸­ã€‚ æ–°åˆ›å»ºçš„å¯¹è±¡ç”±thisæ‰€åº”ç”¨ï¼Œå¹¶ä¸”æœ€åéšå¼çš„è¿”å›this ã€‚ 123var obj = &#123;&#125;;obj.__proto__ = Base.prototype;Base.call(obj); 10. JavaScriptå¼€å‘çš„åŸºæœ¬è§„èŒƒ ä¸è¦åœ¨åŒä¸€è¡Œå£°æ˜å¤šä¸ªå˜é‡ï¼› è¯·ä½¿ç”¨ ===/!==æ¥æ¯”è¾ƒå¸ƒå°”å€¼æˆ–è€…æ•°å€¼ï¼› ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ›¿ä»£ new Arrayè¿™ç§å½¢å¼ï¼› ä¸è¦ä½¿ç”¨å…¨å±€å‡½æ•°ï¼› Switchè¯­å¥å¿…é¡»å¸¦æœ‰defaultåˆ†æ”¯ï¼› å‡½æ•°åº”è¯¥æœ‰è¿”å›å€¼ï¼› Forå¾ªç¯å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·ï¼› ifè¯­å¥å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·ï¼› for-inå¾ªç¯ä¸­çš„å˜é‡åº”è¯¥ä½¿ç”¨let å…³é”®å­—æ˜ç¡®é™å®šä½œç”¨åŸŸï¼Œé¿å…å‘½åç©ºé—´æ±¡æŸ“ã€‚ To be continueã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¬”è®°ï¼šJavaScriptäº‹ä»¶å¤„ç†]]></title>
    <url>%2F2017%2F01%2F27%2F2017-01-27%20JavaScript%20Events%20%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[JavaScript â€” äº‹ä»¶å¤„ç†ï¼šç¬”è®°æ‘˜è¦ å‚è€ƒä¹¦ç±ï¼šã€ŠModern JavaScriptã€‹(Larry Ullman è‘—);ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ (Nicholas C Zakasè‘—). ä¸€ã€ äº‹ä»¶å¤„ç†ï¼š1.åµŒå…¥å¼äº‹ä»¶å¤„ç†å™¨ï¼ˆå¼ºçƒˆä¸å»ºè®®ï¼‰:1234/*æ¯”å¦‚*/ &lt;form action= &quot;#&quot; method = &quot;post&quot; onsubmit = &quot;validataForm();&quot;&gt; /*æˆ–è€…*/ &lt;a href = &quot;somepage.html&quot; onclick = &quot;doSomething();&quot;&gt;Some link&lt;/a&gt; 2.ä¼ ç»Ÿäº‹ä»¶å¤„ç†æ–¹æ³•(ä¸å»ºè®®)ï¼š123456/* ä»¥ä¸‹ä¼ ç»Ÿæ–¹æ³•ä¸å»ºè®®ä½¿ç”¨ */window.onload = init; //æ˜“ç”¨ï¼Œå¯é ï¼Œå±æ€§åå¿…é¡»å…¨å°å†™ã€‚/* æˆ–è€… */window.onload = function()&#123; //åŒ¿åå‡½æ•°æ–¹æ³•//Do whatever.&#125; åŸå› ï¼š 1. ä¸€æ¬¡åªèƒ½æŒ‡å®šä¸€ä¸ªæ—¶é—´å¤„ç†å™¨ï¼› 2. è¾ƒåçš„å‡½æ•°ä¼šè¦†ç›–è¾ƒå‰çš„ï¼› 12document.getElementById('theForm').onsubmit = progress;document.getElementById('theForm').onsubmit = calculate; // å‘ƒ!æœ‰é—®é¢˜. 12345//ç¼“è§£æ–¹æ³•document.getElementById('theForm').onsubmit = function()&#123; progress(); //å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¿™æ ·è§£å†³ï¼Œä½†æ˜¯è¿™æ ·çš„ä»£ç å¾ˆä¸‘é™‹ã€‚ calculate();&#125; 3.W3Cäº‹ä»¶å¤„ç†(å»ºè®®) æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šäº‹ä»¶ç±»å‹ï¼Œäº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œè¡¨ç¤ºäº‹ä»¶é˜¶æ®µçš„å¸ƒå°”å€¼ã€‚123456789101112131415161718 addEventListener(&apos;load&apos;, init , false); //å¯ä»¥ä¸ºç›¸åŒå…ƒç´ æ·»åŠ å¤šä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼›` removeEventListener()(&apos;load&apos;, process , false);``` 2. IE&lt;9çš„äº‹ä»¶å¤„ç†(äº‹ä»¶åç§°å‰ç¼€å¤šäº†&quot;on&quot;) 1. attachEvent(&apos;onload&apos; , init); 2. detachEvent(&apos;onload&apos; , init);3. åˆ›å»ºä¸€ä¸ªäº‹ä»¶åˆ†é…å™¨ ``` javascript function addEvent( obj , type , fn)&#123; if(obj &amp;&amp; objEventListener)&#123; //W3c obj.addEventListener(type, fn , false); &#125;else if(obj &amp;&amp; obj.attachEvent)&#123; //IE&lt;9 obj.attachEvent(&quot;on&quot; + type, fn); &#125; &#125; 4. èŒƒä¾‹ï¼šåˆ›å»ºä¸€ä¸ªå®ç”¨ç¨‹åºåº“12345678910111213141516171819202122232425262728293031323334353637383940414243444546//æ‰€æœ‰å‡½æ•°éƒ½å®šä¹‰åœ¨å…¨å±€å¯¹è±¡Uä¸­ï¼Œé¿å…å¤šä¸ªæ–°å‡½æ•°æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚//æ–°å¯¹è±¡U ï¼ˆUtilityçš„ç¼©å†™ï¼‰var U = &#123; //å®šä¹‰$()æ–¹æ³• $: function(id)&#123; 'use strict'; if (typeof id == 'string')&#123; return document.getElementById(id); &#125; &#125;,//å®šä¹‰setText æ–¹æ³•ï¼Œä¸¤ä¸ªå‚æ•°ï¼šè¦æ›´æ–°çš„å…ƒç´ idå’Œæ¶ˆæ¯æœ¬èº« setText: function(id, message)&#123; 'use strict'; if( (typeof id == 'string') &amp;&amp; (typeof message == 'string'))&#123; var output = this.$(id); if (!output) &#123;return false&#125;; //è·å–idçš„å…ƒç´ å¤±è´¥ if(output.textContext !== undefined)&#123; output.textContext = message; &#125;else&#123; output.innerText = message; &#125; return true; &#125; //End of main IF. &#125;, //End of setText() function. //å°è£…ä¸€ä¸ªâ€˜æ·»åŠ äº‹ä»¶ç›‘å¬å™¨â€™ å‡½æ•° addEvent: function( obj , type , fn)&#123; 'use strict'; if(obj &amp;&amp; obj.removeEventListener)&#123; obj.addEventListener(type, fn, false); &#125;else if (obj &amp;&amp; obj.detachEvent)&#123; obj.attachEvent('on' + type , fn); &#125; &#125;, //End of addEvent() function //å°è£…ä¸€ä¸ªâ€˜ç§»é™¤äº‹ä»¶ç›‘å¬å™¨â€™å‡½æ•° removeEvent: function( obj , type , fn)&#123; 'use strict'; if(obj &amp;&amp; obj.removeEventListener)&#123; obj.removeEventListener(type, fn, false); &#125;else if (obj &amp;&amp; obj.detachEvent)&#123; obj.detachEvent('on' + type , fn); &#125; &#125; //End of removeEvent() function &#125;; //End of U declaration. äºŒã€äº‹ä»¶ç±»å‹äº‹ä»¶ç±»å‹åˆ†ä¸º4ç±»ï¼š è¾“å…¥è®¾å¤‡ é”®ç›˜ æµè§ˆå™¨ è¡¨å• 1.è¾“å…¥è®¾å¤‡äº‹ä»¶1. è¾“å…¥æŒ‰é’®äº‹ä»¶ï¼š1. click äº‹ä»¶ï¼› 2. dblclick äº‹ä»¶ï¼› 3. contextmenu äº‹ä»¶(ç½•è§)ï¼› 2. è¾“å…¥ç§»åŠ¨äº‹ä»¶ï¼š1. mouseout é¼ æ ‡ç§»å‡º; 2. mouseover é¼ æ ‡ç§»è¿‡; 3. mousemove é¼ æ ‡ç§»åŠ¨ï¼ˆæŒç»­ç›‘è§†é¼ æ ‡ï¼Œæ¶ˆè€—æ€§èƒ½ï¼‰; 3. é”®ç›˜äº‹ä»¶ï¼š1. keydown (æŒ‰ä¸‹); 2. keyup (é‡Šæ”¾); 3. keypress (æŒ‰é”®ï¼Œå‰äºŒè€…ç»„åˆ); 4. æµè§ˆå™¨äº‹ä»¶ï¼š1. load (åŠ è½½å®Œæˆ); 2. unload (å¸è½½); 3. resize (æ”¹å˜æµè§ˆå™¨çª—å£å¤§å°); 4. scroll (æ»šåŠ¨äº‹ä»¶); 5. copy; 6. cut; 7. paste; 5. è¡¨å•äº‹ä»¶ï¼š â€“ resetï¼šè¡¨å•é‡ç½®(ç‚¹å‡»é‡ç½®htmlæŒ‰é’®)æ—¶è§¦å‘ï¼Œç”¨æˆ·å¾ˆå°‘æœ‰é‡ç½®è¡¨å•çš„éœ€è¦ï¼›è‹¥è¦ä½¿ç”¨æ­¤äº‹ä»¶ï¼Œå¯ä»¥æ·»åŠ ç›‘è§†ï¼š 123addEvent(document.getElementById(&apos;theForm&apos;), &apos;reset&apos; , function()&#123; return confirm(&quot;æ‚¨ç¡®å®šæƒ³è¦é‡ç½®è¡¨å•å—ï¼Ÿ&quot;); &#125;); â€“ select: æ–‡æœ¬è¾“å…¥åŸŸå’Œæ–‡æœ¬åŒºåŸŸçš„æ–‡æœ¬å†…å®¹è¢«é€‰ä¸­æ—¶ï¼› â€“ change: å…ƒç´ å€¼å˜åŒ–æ—¶ï¼› â€“ focus: å•å‡»æˆ–Tabé”®åˆ°æ–‡æœ¬è¾“å…¥åŸŸæ—¶ï¼› â€“ blur: å…‰æ ‡æˆ–é€‰æ‹©é¡¹çš„ç§»åŠ¨æ—¶ï¼› ä¸‰ã€äº‹ä»¶å¯è®¿é—®æ€§(Accessibility)1. é…å¯¹äº‹ä»¶(Pairing events): ä½¿ç”¨åŒä¸€ä¸ªå‡½æ•°å¤„ç†ç›¸åŒå…ƒç´ çš„ç±»ä¼¼äº‹ä»¶ã€‚ 2. å¯è®¿é—®æ€§(Accessibility):åœ¨ç§»åŠ¨è®¾å¤‡å’Œå…¶ä»–éæ ‡å‡†æµè§ˆå™¨ä¸Šï¼Œå¯¹äºä¸ä½¿ç”¨è¾“å…¥è®¾å¤‡çš„æµè§ˆå™¨ï¼Œmouseoverå’Œmouseoutäº‹ä»¶æ¯«æ— æ„ä¹‰ï¼Œå› ä¸ºå®ƒä»¬æ°¸è¿œä¸ä¼šå‘ç”Ÿã€‚ä¾‹å¦‚ï¼š1234&lt;a href = &quot;somepage.html&quot; id = &quot;link&quot; &gt; Some Text &lt;/a&gt;&lt;script&gt;addEvent(document.getElementById(&apos;link&apos;), &apos;mouseover&apos;,handleLinkMouseOver);&lt;/script&gt; ä¸Šè¿°ä»£ç ä¸­ï¼Œäº‹ä»¶åªèƒ½é€šè¿‡é¼ æ ‡è§¦å‘ã€‚ä½†æ˜¯è¿˜æ˜¯æœ‰ç¼“è§£æ–¹æ³•ã€‚å¦‚æœæµè§ˆå™¨ä»…ç”±é”®ç›˜æ§åˆ¶ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¯ä»¥ç›‘è§†focusäº‹ä»¶çš„(Tabé”®)ã€‚å› æ­¤ï¼Œå¢å¼ºå¯è®¿é—®æ€§çš„äº‹ä»¶å¤„ç†æ–¹æ³•æ˜¯åˆ›å»ºä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼š123456&lt;a href = &quot;somepage.html&quot; id = &quot;link&quot;&gt;some Text&lt;/a&gt;&lt;script&gt;//é…å¯¹äº‹ä»¶addEvent(document.getElementById(&apos;link&apos;), &apos;mouseover&apos;, doSomething);addEvent(document.getElementById(&apos;link&apos;), &apos;focus&apos;, doSomething);&lt;/script&gt; 3.äº‹ä»¶å’Œæ¸è¿›å¢å¼º æ¸è¿›å¢å¼ºçš„çœŸæ­£åŸåˆ™ï¼š ä½¿ç”¨JavaScript( å’ŒCSS )æ”¹è¿›åŸºæœ¬åŠŸèƒ½ï¼Œä½¿å¾—ç”¨æˆ·ä¸ç®¡ä½¿ç”¨ä½•ç§è®¾å¤‡ï¼Œéƒ½ä¸ä¼šè¢«æŠ›å¼ƒ(å¿½ç•¥)ã€‚ åªæœ‰åœ¨å¼€å‘è€…æœ‰æ„è¯†çš„å¿½ç•¥ä¸€äº›ç”¨æˆ·æ—¶ï¼ŒJavaScriptæ‰æ˜¯æœ‰å¿…è¦çš„ã€‚ ä½†æ˜¯åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒJavaScriptæ˜¯æ²¡æœ‰å¿…è¦çš„ï¼šæ¯”å¦‚è¡¨å•çš„æäº¤åº”è¯¥åœ¨æœ‰æ— JavaScriptçš„æƒ…å†µä¸‹éƒ½èƒ½è¿›è¡Œ(åœ¨æœåŠ¡ç«¯éƒ½èƒ½éªŒè¯)ã€‚ å°†æ¸è¿›å¢å¼ºçš„æ€æƒ³åº”ç”¨åˆ°äº‹ä»¶å¤„ç†ä¸­ï¼Œå‘å·²ç»æœ‰é»˜è®¤äº‹ä»¶è¡Œä¸ºçš„å…ƒç´ æ·»åŠ äº‹ä»¶æ—¶å¿…é¡»å°å¿ƒã€‚ä¾‹å¦‚ï¼šè¡¨å•æäº¤æ—¶ï¼Œè¡¨å•çš„æ•°æ®å‘é€ç»™æœåŠ¡å™¨ç«¯è„šæœ¬ã€‚ä¸ºè¡¨å•æ·»åŠ æäº¤äº‹ä»¶ï¼Œä¸ºå…¶æ·»åŠ å…¶ä»–åŠŸèƒ½ï¼Œåœ¨é€»è¾‘ä¸Šæ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚ å››ã€é«˜çº§äº‹ä»¶å¤„ç† å¼•ç”¨äº‹ä»¶ äº‹ä»¶å±æ€§ æ£€æŸ¥æŒ‰é”® é˜»æ­¢é»˜è®¤äº‹ä»¶è¡Œä¸º äº‹ä»¶çš„ä¸¤ä¸ªé˜¶æ®µï¼šæ•æ‰å’Œå†’æ³¡ å§”æ´¾äº‹ä»¶å¤„ç† 1.å¼•ç”¨äº‹ä»¶ å½“äº‹ä»¶å¤„ç†ç¨‹åºç”¨äºå¤šä¸ªå…ƒç´ ä¸Šçš„ç›¸åŒäº‹ä»¶ï¼ˆæˆ–è€…ç›¸åŒå…ƒç´ ä¸Šçš„ä¸åŒäº‹ä»¶ï¼‰æ—¶ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºå°±å¿…é¡»è€ƒè™‘å…¶çµæ´»æ€§ã€‚ 12345function someEventHandler(e)&#123; //eå°±æ˜¯å¼•ç”¨äº‹ä»¶ï¼Œä»£è¡¨å‘ç”Ÿçš„äº‹ä»¶ if(typeof e == "undefined")&#123; e = window.event; //è€ƒè™‘IE8åŠæ›´æ—© &#125;&#125;; 2.äº‹ä»¶å±æ€§ äº‹ä»¶å¯¹è±¡é€šè¿‡å„ç§å±æ€§æä¾›ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒæµè§ˆå™¨æ”¯æŒçš„å±æ€§æœ‰æ‰€å·®å¼‚ã€‚(è¿™é‡Œä¸æ·±ç©¶ï¼Œåç»­è¡¥å……ã€‚) 3.æ£€æŸ¥æŒ‰é”® å½“é”®ç›˜äº‹ä»¶è§¦å‘æ—¶ï¼Œå¯ä»¥é€šè¿‡äº‹ä»¶å¯¹è±¡ç¡®å®šæŒ‰ä¸‹çš„å…·ä½“é”®ã€‚è¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¤æ‚ï¼Œåœ¨è¿™é‡Œç¨å¾®å¸¦è¿‡ã€‚ ç¤ºä¾‹ä»£ç ï¼šä»¥ä¸€è‡´çš„æ–¹å¼è·å¾—å­—ç¬¦ï¼š 123456var charCode = e.which || e.keyCode; //IEä¸­ä¸æ”¯æŒwhich// æˆ–è€…æ›´å‡†ç¡®çš„var charCode = (typeof e.which == &apos;number&apos;)?e.which : e.keyCode;//è·å¾—ä¸å­—ç¬¦ä»£ç ç›¸å¯¹åº”çš„å®é™…å­—ç¬¦:String.fromCharCode(charcode); 4.é˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸º ä¸€äº›ä¸åŸºæœ¬æµè§ˆå™¨ç›¸å…³çš„JSäº‹ä»¶ï¼š å•å‡»é“¾æ¥ã€æäº¤è¡¨å•ç­‰ã€‚åœ¨äº‹ä»¶å¤„ç†å™¨å­˜åœ¨æ—¶ï¼Œäº‹ä»¶å‘ç”Ÿä¼šè°ƒç”¨å¯¹åº”çš„å‡½æ•°ï¼Œåœ¨å‡½æ•°è¿è¡Œä¹‹åï¼Œæµè§ˆå™¨ä»ç„¶ç»§ç»­è¿›è¡Œå®ƒé€šå¸¸åº”è¯¥è¿›è¡Œçš„äº‹ä»¶å¤„ç†ã€‚ä¾‹å¦‚ï¼šæäº¤è¡¨å•æ—¶ï¼Œæäº¤äº‹ä»¶å¤„ç†å™¨å¯èƒ½æ‰§è¡Œå®¢æˆ·ç«¯éªŒè¯ã€‚å¦‚æœå‘ç”Ÿäº†é”™è¯¯ï¼Œåº”è¯¥é˜»æ­¢è¡¨å•æäº¤åˆ°æœåŠ¡å™¨ç«¯è„šæœ¬ï¼Œè®©å®¢æˆ·æœ‰æœºä¼šæ”¹æ­£é”™è¯¯ã€‚æ–¹æ³•ï¼šä»äº‹ä»¶å¤„ç†å™¨ä¸­è¿”å›falseã€‚ 123456789101112131415161718// ä»…åœ¨ä¼ ç»Ÿæ–¹æ³•æ³¨å†Œäº‹ä»¶å¤„ç†å™¨æ—¶å¯é å·¥ä½œï¼Œä¸å»ºè®®ã€‚function handleForm()&#123; //Do whatever. if(errors)&#123; return false; &#125;else&#123; return true; &#125;&#125;//ä»¥ä¸‹æ˜¯è·¨æµè§ˆå™¨çš„å…¼å®¹æ–¹æ³•ï¼Œè°ƒç”¨äº‹ä»¶å¯¹è±¡çš„preventDefault();if(typeof e == &apos;undefined&apos;) &#123;e = window.event;&#125;if(e.preventDefault)&#123; e.preventDefault();&#125;else &#123; e.returnValue = false;&#125;return false; //é¢å¤–çš„é¢„é˜²æªæ–½ã€‚ ä½¿ç”¨PreventDefault()æˆ–è®¾ç½®returnValueçš„å¦ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼šå¯ä»¥åœ¨å‡½æ•°å¼€å§‹æ—¶æ‰§è¡Œï¼Œä½¿åç»­çš„å‡½æ•°ä»£ç ä»ç„¶è¿è¡Œã€‚ 5.äº‹ä»¶çš„ä¸¤ä¸ªé˜¶æ®µï¼šæ•æ‰å’Œå†’æ³¡ç¤ºä¾‹ï¼š12345678910&lt;div&gt; &lt;h1&gt;This is a title&lt;/h1&gt; &lt;p&gt;This is a paragraph. &lt;a href = &quot;#&quot; id = &quot;link&quot;&gt;This is a link.&lt;/a&gt; &lt;/p&gt;&lt;/div&gt;&lt;script&gt; // U.$()æ–¹æ³•ä¸jqueryè·å–DOMèŠ‚ç‚¹æ–¹æ³•ä¸€è‡´ï¼Œåªæ˜¯åœ¨å‰æ–‡å®šä¹‰äº†ä¸€ä¸ªæ–°å¯¹è±¡U. addEvent(U.$(&apos;link&apos;), &apos;mouseover&apos; , doSomething);&lt;/script&gt; **åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒåŒ…å«å…³ç³»ï¼ša&lt; p&lt; div&lt; html&lt; Document&lt; windowã€‚å½“é¼ æ ‡æ‚¬åœåœ¨é“¾æ¥ä¹‹ä¸Šï¼Œmouseoveräº‹ä»¶å®é™…ä¸Šç»å†äº†å‡ ä¸ªæ­¥éª¤ï¼Œåœ¨ä¸¤ä¸ªä¸åŒçš„é˜¶æ®µåˆ°è¾¾å’Œç¦»å¼€ç›®æ ‡ï¼ˆé“¾æ¥ï¼‰ã€‚ æ³¨æ„ï¼Œäº‹ä»¶ä¼ æ’­ä¸€å…±æœ‰ä¸‰ä¸ªé˜¶æ®µï¼š1.æ•è·é˜¶æ®µï¼› 2.è°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºï¼› 3.å†’æ³¡é˜¶æ®µã€‚ 1.æ•æ‰é˜¶æ®µï¼š å½“ä½ ä½¿ç”¨äº‹ä»¶æ•è·æ—¶ï¼Œç”±å¤–å‘å†…ï¼Œçˆ¶çº§å…ƒç´ å…ˆè§¦å‘ï¼Œå­çº§å…ƒç´ åè§¦å‘ï¼›å³divå…ˆè§¦å‘ï¼Œpåè§¦å‘ã€‚ 2.äº‹ä»¶å¤„ç†ï¼š è°ƒç”¨æŸ¥æ‰¾åˆ°çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼› 3.å†’æ³¡é˜¶æ®µï¼š äº‹ä»¶å†’æ³¡å½“ä½ ä½¿ç”¨äº‹ä»¶å†’æ³¡æ—¶ï¼Œç”±å†…å‘å¤–ï¼Œå­çº§å…ƒç´ å…ˆè§¦å‘ï¼Œçˆ¶çº§å…ƒç´ åè§¦å‘ï¼›å³på…ˆè§¦å‘ï¼Œdivåè§¦å‘ã€‚ W3Cæ¨¡å‹ åœ¨W3Cæ¨¡å‹ä¸­ï¼Œä»»ä½•äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå…ˆä»é¡¶å±‚å¼€å§‹è¿›è¡Œäº‹ä»¶æ•è·ï¼Œç›´åˆ°äº‹ä»¶è§¦å‘åˆ°è¾¾äº†äº‹ä»¶æºå…ƒç´ ã€‚ç„¶åï¼Œå†ä»äº‹ä»¶æºå¾€ä¸Šè¿›è¡Œäº‹ä»¶å†’æ³¡ï¼Œç›´åˆ°åˆ°è¾¾documentã€‚ ç¨‹åºå‘˜å¯ä»¥è‡ªå·±é€‰æ‹©ç»‘å®šäº‹ä»¶æ—¶é‡‡ç”¨äº‹ä»¶æ•è·è¿˜æ˜¯äº‹ä»¶å†’æ³¡ï¼Œæ–¹æ³•å°±æ˜¯ç»‘å®šäº‹ä»¶æ—¶é€šè¿‡addEventListenerå‡½æ•°ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°è‹¥æ˜¯trueï¼Œåˆ™è¡¨ç¤ºé‡‡ç”¨äº‹ä»¶æ•è·ï¼Œè‹¥æ˜¯falseï¼Œåˆ™è¡¨ç¤ºé‡‡ç”¨äº‹ä»¶å†’æ³¡ã€‚ 1ele.addEventListener(&apos;click&apos;,doSomething2,true) true=æ•è· false=å†’æ³¡ ä¼ ç»Ÿç»‘å®šäº‹ä»¶æ–¹å¼ åœ¨ä¸€ä¸ªæ”¯æŒW3C DOMçš„æµè§ˆå™¨ä¸­ï¼Œåƒè¿™æ ·ä¸€èˆ¬çš„ç»‘å®šäº‹ä»¶æ–¹å¼ï¼Œæ˜¯é‡‡ç”¨çš„äº‹ä»¶å†’æ³¡æ–¹å¼ã€‚ 1ele.onclick = doSomething2 IEæµè§ˆå™¨ å¦‚ä¸Šé¢æ‰€è¯´ï¼ŒIEåªæ”¯æŒäº‹ä»¶å†’æ³¡ï¼Œä¸æ”¯æŒäº‹ä»¶æ•è·ï¼Œå®ƒä¹Ÿä¸æ”¯æŒaddEventListenerå‡½æ•°ï¼Œä¸ä¼šç”¨ç¬¬ä¸‰ä¸ªå‚æ•°æ¥è¡¨ç¤ºæ˜¯å†’æ³¡è¿˜æ˜¯æ•è·ï¼Œå®ƒæä¾›äº†å¦ä¸€ä¸ªå‡½æ•°attachEventã€‚ 1ele.attachEvent(&quot;onclick&quot;, doSomething2); é™„ï¼šäº‹ä»¶å†’æ³¡ï¼ˆçš„è¿‡ç¨‹ï¼‰ï¼šäº‹ä»¶ä»å‘ç”Ÿçš„ç›®æ ‡ï¼ˆevent.srcElement||event.targetï¼‰å¼€å§‹ï¼Œæ²¿ç€æ–‡æ¡£é€å±‚å‘ä¸Šå†’æ³¡ï¼Œåˆ°documentä¸ºæ­¢ã€‚ äº‹ä»¶çš„ä¼ æ’­æ˜¯å¯ä»¥é˜»æ­¢çš„ï¼šâ€¢ åœ¨W3Cä¸­ï¼Œä½¿ç”¨stopPropagationï¼ˆï¼‰æ–¹æ³•â€¢ åœ¨IEä¸‹è®¾ç½®cancelBubble = trueï¼› åœ¨æ•è·çš„è¿‡ç¨‹ä¸­stopPropagationï¼ˆï¼‰;åï¼Œåé¢çš„å†’æ³¡è¿‡ç¨‹ä¹Ÿä¸ä¼šå‘ç”Ÿäº† é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º ä¾‹å¦‚clickåçš„è·³è½¬:â€¢ åœ¨W3Cä¸­ï¼Œä½¿ç”¨preventDefaultï¼ˆï¼‰æ–¹æ³•ï¼›â€¢ åœ¨IEä¸‹è®¾ç½®window.event.returnValue = false; ç»ˆäºå†™å®Œäº†ï¼ŒèŠ±äº†ä¸€å¤©æ—¶é—´æ€»ç»“äº†â€äº‹ä»¶å¤„ç†â€ï¼Œæ–‡æœ«éƒ¨åˆ†å‚è€ƒäº†ç½‘å‹çš„ç»éªŒã€‚ ä¹æœˆä»½çœ‹çš„ã€ŠJSé«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼Œå½“æ—¶äº‘é‡Œé›¾é‡Œï¼Œåæ¥æ•²äº†å¾ˆå¤šä»£ç åŠæ‡‚ä¸æ‡‚ï¼Œç°åœ¨å†™å®Œè¿™ç¯‡åšå®¢æ‰ç®—æ˜ç™½è¿‡æ¥ã€‚ åœ¨å†™çš„æ—¶å€™ç¿»é˜…ã€ŠJSæƒå¨æŒ‡å—ã€‹ï¼Œé‡Œé¢æœ‰æ›´æ·±å…¥çš„ç»†èŠ‚ï¼Œæœ‰ä¸€éƒ¨åˆ†äº‹ä»¶ç±»å‹å·²ç»è¢«HTML5æ ‡å‡†åŒ–ã€‚ åç»­å†è¡¥å……ã€‚^_^]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
</search>
