---
title: 简述网络原理和优化
categories: 技术
date: 2017-06-06 17:01:19
tags: [网络, 技术]

---



# 1. 一个页面从输入URL到页面加载显示完成，这个过程都发生了什么？
<!--more-->
## 1.1 浏览器处理请求
浏览器开启一个线程处理这个请求，对URL分析判断，如果是HTTP协议，就按Web方式处理。

## 1.2 浏览器处理URL
调用浏览器内核中的对应方法，比如WebView中的loadUrl方法。

## 1.3 DNS解析
通过DNS解析，获取域名的IP地址，设置UA等信息发出第二个GET请求。

## 1.4 建立连接
进行HTTP协议回话，客户端发送报头（请求报头）；

## 1.5 服务器系统响应
进入到Web服务器上的Web Server， 如Apache 、Tomcat 、 Node.JS 等服务器。

## 1.6 服务器程序处理
进入部署好的后端应用，如PHP、Java、JavaScript、Python等，找到相应的请求处理。

## 1.7 服务器处理完成，返回数据
处理结束回馈报头，此处如果浏览器访问过，缓存上有对应资源，会与服务器最后修改时间对比，如果一致，则返回304.

## 1.8 浏览器开始下载HTML
浏览器开始下载HTML文档(响应报头，状态码200)，同时使用缓存。

## 1.9 DOM树建立，加载外部文件
文档树开始建立，根据标记请求所需指定MIME类型的文件（比如CSS，JS），同时设置Cookie。

## 1.10 页面渲染
页面开始渲染DOM，JS根据DOM API操作DOM，执行事件绑定等，页面显示完成。

# 2. HTTP状态码

 - 100  继续， 一般在发送post请求时， 已发送了http header之后，服务器将返回此信息，表示确认。
 - 200 正常返回信息
 - 201 请求成功并且服务器创建了新的资源
 - 202 服务器已接受请求，但尚未处理
 - 301 永久重定向
 - 302 临时重定向
 - 303 临时重定向，且总是使用GET请求新的URI
 - 304 资源未修改，自从上次请求后，请求的网页未修改过。

 - 400 请求格式错误，客户端不应当再犯同样的错误
 - 401 请求未授权
 - 403 禁止访问
 - 404 找不到资源
 
 - 500 服务器内部错误
 - 502 网关错误
 - 503 服务器暂时无法处理请求，可能是过载或者维护

# 3. 前端性能优化

## 3.1 减少http请求次数
CSS雪碧图，JS、CSS代码压缩，图片压缩；

网页Gzip，CDN托管，data缓存，分离图片服务器。

## 3.2 前端模板优化
精简HTML标签，避免带宽浪费。

用变量保存AJAX请求结果，每次操作本地变量，不用请求，减少请求次数。

## 3.3 DOM操作
用`innerHTML`代替DOM操作，减少DOM操作次数，优化JavaScript性能。

缓存DOM节点查找的结果，减少IO读取操作。

## 3.4 避免直接操作style
当需要设置的样式很多时，设置className，而非直接操作style。

## 3.5 少用全局变量
不要给windows添加变量了，他已经很胖了！


---

The End.
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTEzNzEwODE2MjJdfQ==
-->